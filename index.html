<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Neurofisiologia (Slides 08-14) - Vers√£o 3.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .time-up { animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { background-color: #ef4444; } 50% { background-color: #b91c1c; } }
        /* Scrollbar personalizada */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen text-slate-800">

    <div id="root" class="max-w-5xl mx-auto p-4 sm:p-8">
        <div id="header-container"></div>
        
        <div id="results-summary"></div>

        <section id="closed-questions-section" class="space-y-8 mb-12"></section>

        <section id="open-questions-section" class="space-y-8 mb-12"></section>

        <footer class="text-center text-slate-500 text-sm py-6 border-t border-slate-200">
            Simulado Gerado Automaticamente - Baseado nos Slides 08 a 14
        </footer>
    </div>

    <script>
        // --- BASE DE DADOS: POOL DE QUEST√ïES POR SLIDE ---
        // Fechadas: 10 por slide (ser√£o sorteadas 5)
        // Abertas: 3 por slide (ser√£o sorteadas 15 no total)
        
        const SLIDE_DATA = {
            'slide08': {
                nome: 'Slide 08: Controle Motor e Medula',
                cor: 'orange',
                fechadas: [
                    { id: 801, pergunta: 'Qual √© a fun√ß√£o do Reflexo Miot√°tico (de estiramento)?', opcoes: ['Relaxar o m√∫sculo em tens√£o excessiva.', 'Manter o comprimento muscular constante frente a um estiramento.', 'Retirar o membro de um est√≠mulo doloroso.', 'Ativar os m√∫sculos antagonistas.'], correta: 1 },
                    { id: 802, pergunta: 'O √ìrg√£o Tendinoso de Golgi (OTG) √© o receptor sensorial respons√°vel por:', opcoes: ['Detectar mudan√ßas no comprimento muscular.', 'Detectar dor t√©rmica.', 'Detectar a tens√£o/for√ßa exercida pelo m√∫sculo.', 'Detectar vibra√ß√£o na pele.'], correta: 2 },
                    { id: 803, pergunta: 'A rigidez de descerebra√ß√£o, causada por les√£o abaixo do n√∫cleo rubro, manifesta-se por:', opcoes: ['Flex√£o dos membros superiores.', 'Extens√£o dos quatro membros.', 'Paralisia fl√°cida.', 'Tremor de inten√ß√£o.'], correta: 1 },
                    { id: 804, pergunta: 'O trato Corticoespinhal Lateral √© fundamental para:', opcoes: ['Controle da postura axial.', 'Equil√≠brio vestibular.', 'Movimentos volunt√°rios finos da musculatura distal.', 'Reflexos auton√¥micos.'], correta: 2 },
                    { id: 805, pergunta: 'O que define uma Unidade Motora?', opcoes: ['Um neur√¥nio sensorial e um m√∫sculo.', 'Um neur√¥nio motor alfa e todas as fibras musculares que ele inerva.', 'O conjunto de todos os m√∫sculos de um membro.', 'A jun√ß√£o entre o tend√£o e o osso.'], correta: 1 },
                    { id: 806, pergunta: 'No reflexo de retirada (flexor), o fen√¥meno da inerva√ß√£o rec√≠proca garante que:', opcoes: ['Os dois membros flexionem ao mesmo tempo.', 'O m√∫sculo extensor antagonista seja inibido enquanto o flexor contrai.', 'O sinal v√° direto para o c√©rebro sem passar pela medula.', 'Haja contra√ß√£o isom√©trica.'], correta: 1 },
                    { id: 807, pergunta: 'Os neur√¥nios motores inferiores est√£o localizados:', opcoes: ['No c√≥rtex motor prim√°rio.', 'Nos g√¢nglios da base.', 'No corno ventral da medula espinhal.', 'No cerebelo.'], correta: 2 },
                    { id: 808, pergunta: 'A S√≠ndrome do Neur√¥nio Motor Inferior causa:', opcoes: ['Espasticidade e hiperreflexia.', 'Flacidez, atrofia e arreflexia.', 'Tremor de repouso.', 'Movimentos involunt√°rios coreicos.'], correta: 1 },
                    { id: 809, pergunta: 'O trato Vestibuloespinhal atua principalmente:', opcoes: ['Na musculatura intr√≠nseca da m√£o.', 'Na fala.', 'Nos m√∫sculos antigravitacionais para equil√≠brio.', 'Na sensibilidade dolorosa.'], correta: 2 },
                    { id: 810, pergunta: 'Qual estrutura funciona como comparador de comprimento muscular?', opcoes: ['Fuso Muscular.', 'Corp√∫sculo de Meissner.', 'Discos de Merkel.', '√ìrg√£o Tendinoso de Golgi.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta8a', pergunta: 'Diferencie o reflexo miot√°tico do reflexo miot√°tico inverso em termos de est√≠mulo e resposta.', gabarito: 'Miot√°tico: Est√≠mulo √© o estiramento (comprimento); Resposta √© a contra√ß√£o do agonista. Inverso: Est√≠mulo √© a tens√£o (for√ßa); Resposta √© o relaxamento do agonista (prote√ß√£o).' },
                    { id: 'aberta8b', pergunta: 'Quais s√£o as principais diferen√ßas cl√≠nicas entre a S√≠ndrome do Neur√¥nio Motor Superior (NMS) e a do Neur√¥nio Motor Inferior (NMI)?', gabarito: 'NMS (les√£o central): causa espasticidade, hiper-reflexia e sinal de Babinski. NMI (les√£o perif√©rica): causa flacidez, atrofia muscular, fascicula√ß√µes e arreflexia.' },
                    { id: 'aberta8c', pergunta: 'Como a inerva√ß√£o rec√≠proca e a inibi√ß√£o autog√™nica cooperam para um movimento coordenado e seguro?', gabarito: 'A inerva√ß√£o rec√≠proca inibe o antagonista para permitir o movimento (flex√£o). A inibi√ß√£o autog√™nica (OTG) protege o m√∫sculo de tens√£o excessiva, causando relaxamento do agonista.' }
                ]
            },
            'slide09': {
                nome: 'Slide 09: N√∫cleos da Base e Cerebelo',
                cor: 'blue',
                fechadas: [
                    { id: 901, pergunta: 'A via direta dos n√∫cleos da base tem como efeito final:', opcoes: ['Inibi√ß√£o do movimento.', 'Facilita√ß√£o (libera√ß√£o) do movimento volunt√°rio.', 'Manuten√ß√£o da postura est√°tica.', 'Gera√ß√£o de sono REM.'], correta: 1 },
                    { id: 902, pergunta: 'A Doen√ßa de Parkinson ocorre devido √† morte de neur√¥nios dopamin√©rgicos na:', opcoes: ['Subst√¢ncia Negra (Pars Compacta).', 'N√∫cleo Subtal√¢mico.', 'Globo P√°lido Interno.', 'Cerebelo.'], correta: 0 },
                    { id: 903, pergunta: 'Qual dos sintomas abaixo √© cl√°ssico de les√£o cerebelar?', opcoes: ['Tremor de repouso.', 'Rigidez em roda denteada.', 'Dismetria (erro de alvo) e Ataxia.', 'Hemineglig√™ncia.'], correta: 2 },
                    { id: 904, pergunta: 'O hemibalismo (movimentos violentos de arremesso) √© causado por les√£o no:', opcoes: ['N√∫cleo Caudado.', 'Put√¢men.', 'N√∫cleo Subtal√¢mico.', 'C√≥rtex Pr√©-frontal.'], correta: 2 },
                    { id: 905, pergunta: 'O Vestibulocerebelo (Lobo Floculonodular) √© respons√°vel por:', opcoes: ['Planejamento motor complexo.', 'Equil√≠brio e movimentos oculares.', 'Coordena√ß√£o fina dos dedos.', 'Mem√≥ria de procedimentos.'], correta: 1 },
                    { id: 906, pergunta: 'A via indireta dos n√∫cleos da base atua:', opcoes: ['Aumentando a atividade motora.', 'Suprimindo movimentos indesejados (freio).', 'Diretamente na medula espinhal.', 'Na percep√ß√£o sensorial.'], correta: 1 },
                    { id: 907, pergunta: 'O termo "Didiadococinesia" refere-se √† dificuldade em:', opcoes: ['Realizar movimentos alternados r√°pidos.', 'Iniciar o movimento.', 'Ficar em p√©.', 'Engolir.'], correta: 0 },
                    { id: 908, pergunta: 'Qual neurotransmissor √© deficit√°rio na Doen√ßa de Parkinson?', opcoes: ['Serotonina.', 'Acetilcolina.', 'Dopamina.', 'Glutamato.'], correta: 2 },
                    { id: 909, pergunta: 'O Espinocerebelo (Verme e Paraverme) controla principalmente:', opcoes: ['O planejamento cognitivo.', 'A postura e a execu√ß√£o motora de tronco e membros.', 'A frequ√™ncia card√≠aca.', 'O ciclo sono-vig√≠lia.'], correta: 1 },
                    { id: 910, pergunta: 'A Coreia de Huntington afeta primariamente:', opcoes: ['A via indireta (causando excesso de movimento).', 'A via direta (causando falta de movimento).', 'O cerebelo.', 'O c√≥rtex visual.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta9a', pergunta: 'Explique o papel do cerebelo como um "comparador" motor.', gabarito: 'O cerebelo recebe a c√≥pia do comando motor (c√≥rtex) e a informa√ß√£o proprioceptiva da execu√ß√£o real (medula). Ele compara os dois e, se houver erro, envia corre√ß√µes para ajustar o movimento em tempo real.' },
                    { id: 'aberta9b', pergunta: 'Descreva como o desequil√≠brio entre a via direta e a via indireta nos n√∫cleos da base resulta nas caracter√≠sticas do Parkinson e do Huntington.', gabarito: 'Parkinson: Perda de dopamina inibe a via direta e facilita a indireta, resultando em freio excessivo (bradicinesia, rigidez). Huntington: Degenera√ß√£o do estriado (GPE) diminui o freio da via indireta, resultando em excesso de movimento (coreia).' },
                    { id: 'aberta9c', pergunta: 'Cite e defina duas manifesta√ß√µes cl√≠nicas comuns de les√µes cerebelares.', gabarito: 'Dismetria: Erro na estimativa da dist√¢ncia ou amplitude de um movimento, resultando em overshoot ou undershoot do alvo. Ataxia: Falta de coordena√ß√£o motora, levando a uma marcha inst√°vel, com passadas amplas e cambaleantes.' }
                ]
            },
            'slide10': {
                nome: 'Slide 10: C√≥rtices Associativos',
                cor: 'purple',
                fechadas: [
                    { id: 1001, pergunta: 'A les√£o do C√≥rtex Parietal Posterior Direito geralmente causa:', opcoes: ['Afasia de Broca.', 'S√≠ndrome de Neglig√™ncia Unilateral (Hemineglig√™ncia).', 'Cegueira cortical.', 'Mudan√ßa de personalidade.'], correta: 1 },
                    { id: 1002, pergunta: 'A Prosopagnosia √© a incapacidade de reconhecer:', opcoes: ['Cores.', 'Faces familiares.', 'Objetos em movimento.', 'Sons da fala.'], correta: 1 },
                    { id: 1003, pergunta: 'O C√≥rtex Pr√©-Frontal Dorsolateral est√° intimamente ligado a:', opcoes: ['Fun√ß√µes executivas e mem√≥ria de trabalho.', 'Processamento visual prim√°rio.', 'Controle da frequ√™ncia respirat√≥ria.', 'Audi√ß√£o.'], correta: 0 },
                    { id: 1004, pergunta: 'O caso Phineas Gage ilustrou a import√¢ncia do lobo frontal em:', opcoes: ['Equil√≠brio.', 'Vis√£o perif√©rica.', 'Personalidade, inibi√ß√£o social e planejamento.', 'Sensibilidade t√°til.'], correta: 2 },
                    { id: 1005, pergunta: 'A via ventral do processamento visual ("O que √©?") projeta-se para:', opcoes: ['O lobo parietal.', 'O lobo temporal inferior.', 'O lobo frontal.', 'O cerebelo.'], correta: 1 },
                    { id: 1006, pergunta: 'A via dorsal do processamento visual ("Onde est√°?") projeta-se para:', opcoes: ['O lobo parietal.', 'O lobo temporal.', 'A am√≠gdala.', 'O tronco encef√°lico.'], correta: 0 },
                    { id: 1007, pergunta: 'A Afasia de Wernicke caracteriza-se por:', opcoes: ['Fala n√£o fluente e esfor√ßada.', 'Compreens√£o preservada.', 'Fala fluente mas sem sentido (logorreia) e compreens√£o prejudicada.', 'Mudez completa.'], correta: 2 },
                    { id: 1008, pergunta: 'A √°rea de Broca est√° localizada tipicamente no:', opcoes: ['Giro temporal superior.', 'Giro frontal inferior (geralmente √† esquerda).', 'C√≥rtex occipital.', 'Lobo parietal.'], correta: 1 },
                    { id: 1009, pergunta: 'Agnosia √© definida como:', opcoes: ['Perda de for√ßa muscular.', 'Incapacidade de reconhecer objetos apesar da sensa√ß√£o estar intacta.', 'Perda de mem√≥ria.', 'Cegueira total.'], correta: 1 },
                    { id: 1010, pergunta: 'O c√≥rtex de associa√ß√£o temporal est√° ligado a:', opcoes: ['Reconhecimento de objetos e mem√≥ria sem√¢ntica.', 'Aten√ß√£o espacial.', 'Planejamento motor.', 'Reflexos espinhais.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta10a', pergunta: 'Diferencie funcionalmente as √°reas de associa√ß√£o Parietal e Temporal.', gabarito: 'Parietal: Aten√ß√£o espacial, percep√ß√£o do corpo no espa√ßo (Via "Onde"). Les√£o causa Neglig√™ncia. Temporal: Reconhecimento de objetos, faces e significado (Via "O que"). Les√£o causa Agnosias.' },
                    { id: 'aberta10b', pergunta: 'Descreva as diferen√ßas entre a Afasia de Broca e a Afasia de Wernicke em rela√ß√£o √† flu√™ncia e √† compreens√£o da linguagem.', gabarito: 'Broca: N√£o fluente (fala lenta e esfor√ßada) com compreens√£o preservada. Wernicke: Fluente (logorreia) com compreens√£o gravemente prejudicada (parafasias).' },
                    { id: 'aberta10c', pergunta: 'Quais s√£o as tr√™s principais fun√ß√µes executivas atribu√≠das ao C√≥rtex Pr√©-Frontal?', gabarito: '1. Mem√≥ria de Trabalho (manter e manipular informa√ß√µes). 2. Planejamento/Tomada de Decis√£o (formular estrat√©gias). 3. Inibi√ß√£o de Resposta/Controle Comportamental (evitar a√ß√µes inapropriadas).' }
                ]
            },
            'slide11': {
                nome: 'Slide 11: Sono e Vig√≠lia',
                cor: 'indigo',
                fechadas: [
                    { id: 1101, pergunta: 'O "marcapasso" central do ritmo circadiano √©:', opcoes: ['A hip√≥fise.', 'O N√∫cleo Supraquiasm√°tico (NSQ).', 'O t√°lamo.', 'O hipocampo.'], correta: 1 },
                    { id: 1102, pergunta: 'A atonia muscular (paralisia) √© uma caracter√≠stica exclusiva do:', opcoes: ['Sono N1.', 'Sono N2.', 'Sono N3.', 'Sono REM.'], correta: 3 },
                    { id: 1103, pergunta: 'Ondas Delta (lentas e de grande amplitude) predominam em:', opcoes: ['Vig√≠lia atenta.', 'Sono REM.', 'Sono N3 (Profundo).', 'Sono N1.'], correta: 2 },
                    { id: 1104, pergunta: 'A adenosina acumula-se durante a vig√≠lia e atua:', opcoes: ['Aumentando o alerta.', 'Promovendo a press√£o homeost√°tica para o sono.', 'Inibindo a produ√ß√£o de melatonina.', 'Causando sonhos v√≠vidos.'], correta: 1 },
                    { id: 1105, pergunta: 'A melatonina √© secretada pela gl√¢ndula pineal em resposta:', opcoes: ['√Ä luz intensa.', '√Ä escurid√£o.', 'Ao estresse.', '√Ä alimenta√ß√£o.'], correta: 1 },
                    { id: 1106, pergunta: 'Os Fusos do Sono (Sleep Spindles) e Complexos K aparecem no:', opcoes: ['Est√°gio N2.', 'Est√°gio REM.', 'Vig√≠lia.', 'Est√°gio N3.'], correta: 0 },
                    { id: 1107, pergunta: 'O sistema ativador reticular ascendente (SARA) √© essencial para:', opcoes: ['Manter a vig√≠lia e o alerta.', 'Induzir o sono profundo.', 'Consolidar mem√≥ria.', 'Regular a temperatura.'], correta: 0 },
                    { id: 1108, pergunta: 'A narcolepsia est√° frequentemente associada √† perda de neur√¥nios que produzem:', opcoes: ['Dopamina.', 'Hipocretina (Orexina).', 'Serotonina.', 'GABA.'], correta: 1 },
                    { id: 1109, pergunta: 'Durante o sono REM, o EEG apresenta-se:', opcoes: ['Sincronizado e lento.', 'Dessincronizado e r√°pido (semelhante √† vig√≠lia).', 'Plano (sem atividade).', 'Com ondas alfa apenas.'], correta: 1 },
                    { id: 1110, pergunta: 'O "Jet Lag" ocorre devido a:', opcoes: ['Falta de sono REM.', 'Dessincroniza√ß√£o entre o rel√≥gio biol√≥gico interno e o ciclo claro/escuro externo.', 'Excesso de melatonina.', 'Falta de adenosina.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta11a', pergunta: 'Explique a intera√ß√£o entre o Processo C e o Processo S na regula√ß√£o do sono.', gabarito: 'Processo C (Circadiano): Varia√ß√£o c√≠clica do alerta promovida pelo NSQ (rel√≥gio biol√≥gico). Processo S (Homeost√°tico): Ac√∫mulo progressivo de "cansa√ßo" (adenosina) quanto mais tempo ficamos acordados. O sono ocorre quando C est√° baixo e S est√° alto.' },
                    { id: 'aberta11b', pergunta: 'Quais s√£o as principais caracter√≠sticas eletrofisiol√≥gicas (EEG) do sono de Ondas Lentas (N3) e do sono REM?', gabarito: 'Sono N3 (Ondas Lentas): Caracterizado por ondas Delta, lentas e de alta amplitude. Sono REM: Caracterizado por um EEG dessincronizado, r√°pido e de baixa voltagem, semelhante ao da vig√≠lia.' },
                    { id: 'aberta11c', pergunta: 'Qual √© o papel da Orexina (Hipocretina) na manuten√ß√£o da vig√≠lia e qual dist√∫rbio do sono est√° associado √† sua defici√™ncia?', gabarito: 'A Orexina √© um pept√≠deo hipotal√¢mico que estabiliza e promove a vig√≠lia, mantendo o estado de alerta. A defici√™ncia na sua produ√ß√£o est√° fortemente associada √† Narcolepsia.' }
                ]
            },
            'slide12': {
                nome: 'Slide 12: Mem√≥ria e Aprendizado',
                cor: 'teal',
                fechadas: [
                    { id: 1201, pergunta: 'O paciente H.M. teve o hipocampo removido e desenvolveu:', opcoes: ['Amn√©sia retr√≥grada total.', 'Incapacidade de aprender novas habilidades motoras.', 'Amn√©sia anter√≥grada severa (para novos fatos e eventos).', 'Perda da linguagem.'], correta: 2 },
                    { id: 1202, pergunta: 'A mem√≥ria processual (ex: andar de bicicleta) depende de:', opcoes: ['Hipocampo.', 'N√∫cleos da base e Cerebelo.', 'C√≥rtex Pr√©-frontal.', 'Am√≠gdala.'], correta: 1 },
                    { id: 1203, pergunta: 'A mem√≥ria de trabalho (operacional) √© gerenciada principalmente pelo:', opcoes: ['Lobo Occipital.', 'C√≥rtex Pr√©-Frontal.', 'Tronco Encef√°lico.', 'Hipot√°lamo.'], correta: 1 },
                    { id: 1204, pergunta: 'Consolida√ß√£o √© o processo de:', opcoes: ['Esquecer informa√ß√µes irrelevantes.', 'Transformar mem√≥ria de curto prazo (l√°bil) em longo prazo (est√°vel).', 'Recuperar uma mem√≥ria antiga.', 'Prestar aten√ß√£o em algo.'], correta: 1 },
                    { id: 1205, pergunta: 'A mem√≥ria epis√≥dica refere-se a:', opcoes: ['Conhecimentos gerais e fatos (ex: capital do Brasil).', 'Eventos pessoais vividos em um tempo e lugar espec√≠ficos.', 'Habilidades motoras.', 'Condicionamento cl√°ssico.'], correta: 1 },
                    { id: 1206, pergunta: 'O fen√¥meno de LTP (Potencia√ß√£o de Longa Dura√ß√£o) √© considerado:', opcoes: ['Um mecanismo celular base para o aprendizado e mem√≥ria.', 'Uma patologia do hipocampo.', 'A causa do esquecimento.', 'Um tipo de sono.'], correta: 0 },
                    { id: 1207, pergunta: 'A am√≠gdala √© crucial para qual tipo de mem√≥ria?', opcoes: ['Sem√¢ntica neutra.', 'Procedural.', 'Mem√≥ria emocional e condicionamento de medo.', 'Mem√≥ria espacial.'], correta: 2 },
                    { id: 1208, pergunta: 'Habitua√ß√£o √© um tipo de aprendizado n√£o-associativo onde:', opcoes: ['A resposta aumenta com est√≠mulos repetidos.', 'A resposta diminui com a repeti√ß√£o de um est√≠mulo in√≥cuo.', 'O indiv√≠duo associa dois est√≠mulos diferentes.', 'N√£o h√° aprendizado.'], correta: 1 },
                    { id: 1209, pergunta: 'A mem√≥ria sem√¢ntica armazena:', opcoes: ['Fatos, conceitos e significados das palavras.', 'Eventos autobiogr√°ficos.', 'Como tocar piano.', 'O medo de aranhas.'], correta: 0 },
                    { id: 1210, pergunta: 'Onde, acredita-se, as mem√≥rias de longo prazo s√£o armazenadas permanentemente?', opcoes: ['No Hipocampo.', 'Distribu√≠das pelo Neoc√≥rtex.', 'No T√°lamo.', 'Na Medula.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta12a', pergunta: 'Diferencie Mem√≥ria Declarativa (Expl√≠cita) de Mem√≥ria N√£o-Declarativa (Impl√≠cita).', gabarito: 'Declarativa: Consciente, fatos e eventos (Saber "o que"), depende do hipocampo. N√£o-declarativa: Inconsciente, habilidades, h√°bitos e condicionamento (Saber "como"), depende de n√∫cleos da base/cerebelo/am√≠gdala.' },
                    { id: 'aberta12b', pergunta: 'Explique o papel do Hipocampo na mem√≥ria expl√≠cita e qual o processo ele executa.', gabarito: 'O hipocampo √© fundamental para a consolida√ß√£o da mem√≥ria expl√≠cita (epis√≥dica e sem√¢ntica). Ele recebe informa√ß√µes corticais e as "junta" temporariamente, transferindo-as para armazenamento permanente no c√≥rtex (consolida√ß√£o).' },
                    { id: 'aberta12c', pergunta: 'O que √© a Potencia√ß√£o de Longa Dura√ß√£o (LTP) e como ela est√° relacionada ao aprendizado?', gabarito: 'LTP √© um aumento duradouro na efic√°cia da transmiss√£o sin√°ptica ap√≥s a estimula√ß√£o da sinapse por um breve per√≠odo de tempo. √â o principal mecanismo celular proposto para o armazenamento de informa√ß√µes (engrama) e o aprendizado.' }
                ]
            },
            'slide13': {
                nome: 'Slide 13: Emo√ß√µes e Sistema L√≠mbico',
                cor: 'pink',
                fechadas: [
                    { id: 1301, pergunta: 'O Circuito de Papez foi originalmente proposto como o substrato anat√¥mico de:', opcoes: ['Controle motor.', 'Vis√£o.', 'Emo√ß√µes.', 'Audi√ß√£o.'], correta: 2 },
                    { id: 1302, pergunta: 'A estimula√ß√£o da Am√≠gdala em humanos geralmente provoca:', opcoes: ['Riso incontrol√°vel.', 'Sentimento de medo e ansiedade.', 'Sono profundo.', 'Fome intensa.'], correta: 1 },
                    { id: 1303, pergunta: 'O sistema de recompensa cerebral (Via Mesol√≠mbica) utiliza o neurotransmissor:', opcoes: ['Dopamina.', 'Acetilcolina.', 'Glicina.', 'Subst√¢ncia P.'], correta: 0 },
                    { id: 1304, pergunta: 'A S√≠ndrome de Kluver-Bucy (les√£o temporal bilateral/am√≠gdala) causa:', opcoes: ['Hiperoralidade, hipersexualidade e perda do medo (mansid√£o).', 'Raiva agressiva.', 'Depress√£o.', 'Paralisia.'], correta: 0 },
                    { id: 1305, pergunta: 'O N√∫cleo Accumbens √© uma estrutura chave para:', opcoes: ['Regula√ß√£o da temperatura.', 'Recompensa, prazer e v√≠cio.', 'Vis√£o de cores.', 'Movimentos oculares.'], correta: 1 },
                    { id: 1306, pergunta: 'A express√£o fisiol√≥gica da emo√ß√£o (ex: taquicardia ao ver uma cobra) √© mediada pelo:', opcoes: ['Hipot√°lamo e SNA.', 'C√≥rtex Visual.', 'Hipocampo.', 'Cerebelo.'], correta: 0 },
                    { id: 1307, pergunta: 'A "Falsa Raiva" (Sham Rage) ocorre em animais quando:', opcoes: ['O c√≥rtex √© removido, mas o hipot√°lamo posterior fica intacto.', 'A am√≠gdala √© removida.', 'O cerebelo √© lesionado.', 'A medula √© seccionada.'], correta: 0 },
                    { id: 1308, pergunta: 'O C√≥rtex Cingulado Anterior est√° envolvido em:', opcoes: ['Avalia√ß√£o de erros e componente emocional da dor.', 'Processamento visual prim√°rio.', 'Audi√ß√£o.', 'Controle motor fino.'], correta: 0 },
                    { id: 1309, pergunta: 'Drogas de abuso (Coca√≠na, Anfetamina) atuam aumentando a dopamina no:', opcoes: ['Cerebelo.', 'N√∫cleo Accumbens.', 'Lobo Occipital.', 'T√°lamo.'], correta: 1 },
                    { id: 1310, pergunta: 'Qual √© o papel do C√≥rtex Pr√©-Frontal nas emo√ß√µes?', opcoes: ['Gerar medo.', 'Regular e inibir impulsos emocionais (controle top-down).', 'Produzir adrenalina.', 'Nenhum papel.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta13a', pergunta: 'Qual a rela√ß√£o entre o C√≥rtex Pr√©-Frontal e a Am√≠gdala na regula√ß√£o emocional?', gabarito: 'A am√≠gdala gera respostas emocionais r√°pidas (medo/alerta). O c√≥rtex pr√©-frontal avalia o contexto e exerce controle inibit√≥rio sobre a am√≠gdala, permitindo adequar a resposta emocional √† situa√ß√£o social.' },
                    { id: 'aberta13b', pergunta: 'Descreva a Via Mesol√≠mbica do sistema de recompensa, citando as estruturas principais e o neurotransmissor chave.', gabarito: 'A via √© composta pela √Årea Tegmentar Ventral (VTA) que projeta dopamina para o N√∫cleo Accumbens (NAc). √â o circuito central que media o prazer, o refor√ßo e o comportamento motivado, sendo o alvo de drogas de abuso.' },
                    { id: 'aberta13c', pergunta: 'Explique o que s√£o as emo√ß√µes e como elas se diferenciam dos sentimentos, segundo a neurofisiologia.', gabarito: 'Emo√ß√µes s√£o respostas fisiol√≥gicas e comportamentais a um est√≠mulo (ex: aumento da FC, express√£o facial). Sentimentos s√£o as percep√ß√µes subjetivas e conscientes dessas emo√ß√µes (a experi√™ncia subjetiva de "estar com medo").' }
                ]
            },
            'slide14': {
                nome: 'Slide 14: Sistema Nervoso Auton√¥mico',
                cor: 'red',
                fechadas: [
                    { id: 1401, pergunta: 'As fibras pr√©-ganglionares do sistema simp√°tico liberam:', opcoes: ['Noradrenalina.', 'Acetilcolina.', 'Dopamina.', 'Serotonina.'], correta: 1 },
                    { id: 1402, pergunta: 'Os receptores nos √≥rg√£os efetores do sistema parassimp√°tico s√£o:', opcoes: ['Nicot√≠nicos.', 'Muscar√≠nicos.', 'Adren√©rgicos Alfa.', 'Adren√©rgicos Beta.'], correta: 1 },
                    { id: 1403, pergunta: 'A medula da adrenal funciona funcionalmente como:', opcoes: ['Um g√¢nglio parassimp√°tico.', 'Um g√¢nglio simp√°tico modificado (libera adrenalina no sangue).', 'Uma gl√¢ndula ex√≥crina.', 'Parte do c√≥rtex motor.'], correta: 1 },
                    { id: 1404, pergunta: 'O efeito simp√°tico no cora√ß√£o √©:', opcoes: ['Diminui√ß√£o da frequ√™ncia (bradicardia).', 'Aumento da frequ√™ncia e da for√ßa de contra√ß√£o.', 'Apenas diminui√ß√£o da for√ßa.', 'Nenhum efeito.'], correta: 1 },
                    { id: 1405, pergunta: 'O principal centro integrador da termorregula√ß√£o √©:', opcoes: ['O Hipot√°lamo.', 'O Bulbo.', 'A Ponte.', 'O T√°lamo.'], correta: 0 },
                    { id: 1406, pergunta: 'A febre difere da hipertermia porque na febre:', opcoes: ['H√° falha na perda de calor.', 'O "Set Point" (ponto de ajuste) hipotal√¢mico √© elevado por pirog√™nios.', 'A temperatura n√£o passa de 37 graus.', 'Ocorre apenas em dias quentes.'], correta: 1 },
                    { id: 1407, pergunta: 'A resposta pupilar √† ativa√ß√£o parassimp√°tica √©:', opcoes: ['Midr√≠ase (Dilata√ß√£o).', 'Miose (Contra√ß√£o).', 'Nenhuma.', 'Tremor.'], correta: 1 },
                    { id: 1408, pergunta: 'O sistema nervoso parassimp√°tico tem origem:', opcoes: ['Toracolombar.', 'Craniossacral.', 'Apenas cervical.', 'Apenas lombar.'], correta: 1 },
                    { id: 1409, pergunta: 'Para perder calor, o corpo promove:', opcoes: ['Vasoconstri√ß√£o cut√¢nea e tremores.', 'Vasodilata√ß√£o cut√¢nea e sudorese.', 'Piloere√ß√£o.', 'Aumento do metabolismo.'], correta: 1 },
                    { id: 1410, pergunta: 'O nervo Vago (X par) carrega a maior parte das fibras:', opcoes: ['Simp√°ticas.', 'Parassimp√°ticas.', 'Motoras som√°ticas.', 'Sensoriais de dor.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta14a', pergunta: 'Explique o mecanismo da febre e como ela difere da hipertermia por exerc√≠cio.', gabarito: 'Na febre, pirog√™nios (IL-1, PGE2) elevam o "ponto de ajuste" do hipot√°lamo; o corpo sente frio e produz calor para chegar nesse novo n√≠vel. Na hipertermia, o ponto de ajuste est√° normal, mas o corpo ganha mais calor do que consegue dissipar (falha na refrigera√ß√£o).' },
                    { id: 'aberta14b', pergunta: 'Descreva a diferen√ßa anat√¥mica e neurotransmissora entre o sistema simp√°tico e o parassimp√°tico em rela√ß√£o aos g√¢nglios.', gabarito: 'Simp√°tico: Fibras pr√©-ganglionares curtas (Ach) e p√≥s-ganglionares longas (Noradrenalina, exceto suor). G√¢nglios pr√≥ximos √† medula (cadeia paravertebral). Parassimp√°tico: Fibras pr√©-ganglionares longas (Ach) e p√≥s-ganglionares curtas (Ach). G√¢nglios pr√≥ximos ou dentro do √≥rg√£o efetor.' },
                    { id: 'aberta14c', pergunta: 'O Hipot√°lamo √© o centro de controle do SNA. Explique brevemente duas fun√ß√µes homeost√°ticas que ele regula via SNA.', gabarito: '1. Termorregula√ß√£o: O hipot√°lamo anterior (dissipa√ß√£o de calor) e o posterior (conserva√ß√£o de calor) controlam a resposta vasomotora e a sudorese via SNA. 2. Controle da Press√£o Arterial: Controla a atividade do tronco encef√°lico para modular a frequ√™ncia card√≠aca e a vasoconstri√ß√£o/vasodilata√ß√£o, mantendo a press√£o est√°vel.' }
                ]
            }
        };

        // --- L√ìGICA DO APP ---

        let activeClosedQuestions = {}; // Guarda as 5 perguntas selecionadas por slide (Total 35)
        let activeOpenQuestions = [];   // Guarda as 15 perguntas abertas selecionadas
        let userResponsesClosed = {};
        let userResponsesOpen = {};
        let isVerified = false;
        let isOpenVerified = false;
        let timeRemaining = 5400; // 90 minutos
        let timerInterval;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60).toString().padStart(2, '0');
            const s = (seconds % 60).toString().padStart(2, '0');
            const h = Math.floor(m / 60);
            const remainingM = m % 60;
            return `${h.toString().padStart(2, '0')}h ${remainingM.toString().padStart(2, '0')}m ${s}s`;
        }

        function initQuiz() {
            activeClosedQuestions = {};
            let openPool = [];

            // 1. Configura as 5 quest√µes fechadas por slide
            Object.keys(SLIDE_DATA).forEach(key => {
                const pool = SLIDE_DATA[key];
                
                // 5 Fechadas aleat√≥rias (de 10)
                const shuffledClosed = shuffleArray([...pool.fechadas]);
                activeClosedQuestions[key] = shuffledClosed.slice(0, 5);
                
                // Adiciona TODAS as abertas ao pool total, adicionando info de slide
                openPool.push(...pool.abertas.map(q => ({
                    ...q,
                    slideName: pool.nome,
                    slideColor: pool.cor,
                    slideKey: key
                })));
            });

            // 2. Embaralha e seleciona 15 quest√µes abertas do pool total (o pool total tem 21)
            const shuffledOpen = shuffleArray(openPool);
            activeOpenQuestions = shuffledOpen.slice(0, 15); // Seleciona as 15 perguntas pedidas
            
            // Popula as respostas abertas do usu√°rio, se houver
            activeOpenQuestions.forEach(q => {
                userResponsesOpen[q.id] = userResponsesOpen[q.id] || '';
            });

            renderHeader();
            renderClosedSection();
            renderOpenSection();
            startTimer();
        }

        function startTimer() {
            const timerBox = document.getElementById('timer-box');
            if (!timerBox) return;

            if (timerInterval) clearInterval(timerInterval);

            const updateTimer = () => {
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    timeRemaining = 0;
                    if (!isVerified) verifyClosedAnswers();
                    timerBox.classList.add('bg-red-700', 'time-up');
                    renderHeader(); 
                    return;
                }
                
                document.getElementById('timer-display').innerText = formatTime(timeRemaining);

                if (timeRemaining <= 300) { // Alerta visual nos √∫ltimos 5 minutos
                    timerBox.classList.add('bg-red-600', 'time-up');
                    timerBox.classList.remove('bg-slate-700');
                }
                timeRemaining--;
            };

            timerInterval = setInterval(updateTimer, 1000);
            updateTimer(); // Chama imediatamente para evitar 1s de delay
        }

        // --- RENDERIZA√á√ÉO ---

        function renderHeader() {
            const totalFechadas = Object.keys(activeClosedQuestions).reduce((sum, key) => sum + activeClosedQuestions[key].length, 0);
            const totalQ = totalFechadas + activeOpenQuestions.length;
            const timerClass = timeRemaining <= 300 && timeRemaining > 0 ? 'bg-red-600 time-up' : (timeRemaining <= 0 ? 'bg-red-700' : 'bg-slate-700');
            
            document.getElementById('header-container').innerHTML = `
                <header class="bg-slate-800 text-white p-6 rounded-xl shadow-lg flex flex-col md:flex-row justify-between items-center gap-4">
                    <div>
                        <h1 class="text-2xl font-bold">Simulado Neurofisiologia</h1>
                        <p class="text-slate-400 text-sm">Slides 08 a 14 ‚Ä¢ ${totalQ} Quest√µes</p>
                    </div>
                    <div id="timer-box" class="${timerClass} px-4 py-2 rounded-lg font-mono text-xl font-bold transition-colors">
                        <span id="timer-display">${formatTime(timeRemaining)}</span>
                    </div>
                </header>
            `;
        }

        function renderResultsSummary() {
            const container = document.getElementById('results-summary');
            if (!isVerified) { container.innerHTML = ''; return; }

            const totalFechadas = Object.keys(activeClosedQuestions).reduce((sum, key) => sum + activeClosedQuestions[key].length, 0);
            let correct = 0;
            let summaryHTML = '<div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">';
            
            Object.keys(SLIDE_DATA).forEach(key => {
                let slideCorrect = 0;
                activeClosedQuestions[key].forEach(q => {
                    if (userResponsesClosed[q.id] === q.correta) {
                        correct++;
                        slideCorrect++;
                    }
                });
                const info = SLIDE_DATA[key];
                summaryHTML += `
                    <div class="bg-white p-3 rounded border-l-4 border-${info.cor}-500 shadow-sm text-center">
                        <div class="text-xs text-slate-500 truncate">${info.nome}</div>
                        <div class="font-bold text-xl text-slate-800">${slideCorrect}/5</div>
                    </div>
                `;
            });
            summaryHTML += '</div>';

            const finalScore = Math.round((correct / totalFechadas) * 100);
            const msgClass = finalScore >= 70 ? 'text-green-600' : (finalScore >= 50 ? 'text-yellow-600' : 'text-red-600');
            const totalIncorrect = totalFechadas - correct;

            container.innerHTML = `
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-300 mb-8 shadow-lg">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4 text-center">‚úÖ Resultado da Parte A (Objetivas)</h2>
                    <div class="grid grid-cols-3 gap-4 mb-6 text-center">
                        <div class="p-3 bg-green-50 rounded border border-green-200"><p class="text-2xl font-bold text-green-700">${correct}</p><p class="text-xs text-green-600">Acertos</p></div>
                        <div class="p-3 bg-red-50 rounded border border-red-200"><p class="text-2xl font-bold text-red-700">${totalIncorrect}</p><p class="text-xs text-red-600">Erros/Em branco</p></div>
                        <div class="p-3 bg-blue-50 rounded border border-blue-200"><p class="text-2xl font-bold ${msgClass}">${finalScore}%</p><p class="text-xs text-blue-600">Aproveitamento</p></div>
                    </div>
                    <p class="font-bold text-slate-700 mb-3 border-b pb-2">Desempenho por Slide (5 Quest√µes Cada):</p>
                    ${summaryHTML}
                </div>
            `;
        }

        function renderClosedSection() {
            const container = document.getElementById('closed-questions-section');
            let html = `<h2 class="text-2xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 flex items-center gap-2">
                            <span>üìù</span> Parte A: Quest√µes Objetivas (5 por Slide)
                        </h2>`;
            let globalQNum = 0;

            Object.keys(SLIDE_DATA).forEach((slideKey) => {
                const slideInfo = SLIDE_DATA[slideKey];
                const questions = activeClosedQuestions[slideKey];
                
                html += `
                    <div class="bg-white rounded-xl shadow-md overflow-hidden border-t-4 border-${slideInfo.cor}-500">
                        <div class="bg-slate-50 p-4 border-b border-slate-100">
                            <h3 class="font-bold text-lg text-${slideInfo.cor}-700 flex items-center gap-2">
                                üìÇ ${slideInfo.nome}
                            </h3>
                        </div>
                        <div class="p-6 space-y-8">
                `;

                questions.forEach((q) => {
                    globalQNum++;
                    const userVal = userResponsesClosed[q.id];
                    
                    let optionsHtml = '';
                    q.opcoes.forEach((opt, optIdx) => {
                        let btnClass = "w-full text-left p-3 rounded border transition-all ";
                        let icon = "";
                        
                        if (!isVerified) {
                            if (userVal === optIdx) btnClass += `bg-${slideInfo.cor}-100 border-${slideInfo.cor}-500 ring-1 ring-${slideInfo.cor}-500`;
                            else btnClass += "hover:bg-slate-50 border-slate-200";
                        } else {
                            if (optIdx === q.correta) {
                                btnClass += "bg-green-100 border-green-500 font-semibold";
                                icon = "‚úÖ";
                            } else if (userVal === optIdx && userVal !== q.correta) {
                                btnClass += "bg-red-100 border-red-500 text-red-700 line-through";
                                icon = "‚ùå";
                            } else {
                                btnClass += "opacity-60 border-slate-200";
                            }
                        }

                        optionsHtml += `
                            <button onclick="handleClosedClick(${q.id}, ${optIdx})" 
                                    ${isVerified ? 'disabled' : ''}
                                    class="${btnClass} mb-2 relative group">
                                <span class="font-mono text-xs font-bold text-slate-500 mr-2">${String.fromCharCode(65+optIdx)})</span>
                                ${opt}
                                <span class="absolute right-3 top-3">${icon}</span>
                            </button>
                        `;
                    });

                    html += `
                        <div class="question-block border-b border-slate-100 pb-6 last:border-b-0">
                            <p class="font-medium text-slate-800 mb-3"><span class="text-slate-500 mr-1">Q${globalQNum}.</span> ${q.pergunta}</p>
                            <div>${optionsHtml}</div>
                        </div>
                    `;
                });

                html += `</div></div>`;
            });

            if (!isVerified) {
                html += `
                    <div class="flex justify-end pt-4">
                        <button onclick="verifyClosedAnswers()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:scale-105">
                            Finalizar Parte A (Objetivas)
                        </button>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        function renderOpenSection() {
            const container = document.getElementById('open-questions-section');
            let html = `<h2 class="text-2xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 flex items-center gap-2 mt-12">
                            <span>‚úçÔ∏è</span> Parte B: Quest√µes Discursivas (${activeOpenQuestions.length} Sorteadas)
                        </h2>`;

            activeOpenQuestions.forEach((q, idx) => {
                const userText = userResponsesOpen[q.id] || '';
                
                html += `
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-${q.slideColor}-500">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-semibold text-lg text-slate-800"><span class="text-${q.slideColor}-600 mr-2">${idx+1}.</span> ${q.pergunta}</h3>
                            <span class="text-xs font-bold px-2 py-1 rounded bg-${q.slideColor}-100 text-${q.slideColor}-700">${q.slideName}</span>
                        </div>
                        
                        <textarea oninput="handleOpenInput('${q.id}', this.value)"
                            ${isOpenVerified ? 'disabled' : ''}
                            class="w-full p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-${q.slideColor}-400 outline-none text-slate-700 resize-y min-h-[100px]"
                            placeholder="Escreva sua resposta aqui...">${userText}</textarea>
                        
                        ${isOpenVerified ? `
                            <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg animate-fade-in">
                                <p class="text-sm font-bold text-green-800 mb-1">Gabarito Sugerido:</p>
                                <p class="text-slate-700 text-sm leading-relaxed">${q.gabarito}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            if (!isOpenVerified) {
                html += `
                    <div class="flex justify-end pt-4">
                        <button onclick="verifyOpenAnswers()" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:scale-105">
                            Ver Gabaritos (Parte B)
                        </button>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // --- HANDLERS ---

        window.handleClosedClick = (qId, optIdx) => {
            if (isVerified) return;
            userResponsesClosed[qId] = optIdx;
            renderClosedSection();
        };

        window.handleOpenInput = (qId, val) => {
            userResponsesOpen[qId] = val;
        };

        window.verifyClosedAnswers = () => {
            if (isVerified) return;
            clearInterval(timerInterval);
            isVerified = true;
            
            // Calcula Pontua√ß√£o e renderiza sum√°rio
            renderResultsSummary();
            
            // Scroll para o resumo
            window.scrollTo({ top: 0, behavior: 'smooth' });
            renderClosedSection();
            renderHeader(); 
        };

        window.verifyOpenAnswers = () => {
            if (isOpenVerified) return;
            isOpenVerified = true;
            renderOpenSection();
            // Scroll para o in√≠cio da se√ß√£o aberta
            document.getElementById('open-questions-section').scrollIntoView({ behavior: 'smooth' });
        };

        // Iniciar
        window.onload = function() {
            initQuiz();
        };
    </script>
</body>
</html>
