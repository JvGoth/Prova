<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Neurofisiologia (Slides 08-14)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        .time-up { animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { background-color: #ef4444; } 50% { background-color: #b91c1c; } }
        /* Scrollbar personalizada */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen text-slate-800">

    <div id="root" class="max-w-5xl mx-auto p-4 sm:p-8">
        <div id="header-container"></div>
        
        <div id="results-summary"></div>

        <section id="closed-questions-section" class="space-y-8 mb-12"></section>

        <section id="open-questions-section" class="space-y-8 mb-12"></section>

        <footer class="text-center text-slate-500 text-sm py-6 border-t border-slate-200">
            Simulado Gerado Automaticamente - Baseado nos Slides 08 a 14
        </footer>
    </div>

    <script>
        // --- BASE DE DADOS: POOL DE 10 QUEST√ïES POR SLIDE ---
        // O sistema selecionar√° aleatoriamente 5 destas para cada bloco.
        
        const SLIDE_DATA = {
            'slide08': {
                nome: 'Slide 08: Controle Motor e Medula',
                cor: 'orange',
                fechadas: [
                    { id: 801, pergunta: 'Qual √© a fun√ß√£o do Reflexo Miot√°tico (de estiramento)?', opcoes: ['Relaxar o m√∫sculo em tens√£o excessiva.', 'Manter o comprimento muscular constante frente a um estiramento.', 'Retirar o membro de um est√≠mulo doloroso.', 'Ativar os m√∫sculos antagonistas.'], correta: 1 },
                    { id: 802, pergunta: 'O √ìrg√£o Tendinoso de Golgi (OTG) √© o receptor sensorial respons√°vel por:', opcoes: ['Detectar mudan√ßas no comprimento muscular.', 'Detectar dor t√©rmica.', 'Detectar a tens√£o/for√ßa exercida pelo m√∫sculo.', 'Detectar vibra√ß√£o na pele.'], correta: 2 },
                    { id: 803, pergunta: 'A rigidez de descerebra√ß√£o, causada por les√£o abaixo do n√∫cleo rubro, manifesta-se por:', opcoes: ['Flex√£o dos membros superiores.', 'Extens√£o dos quatro membros.', 'Paralisia fl√°cida.', 'Tremor de inten√ß√£o.'], correta: 1 },
                    { id: 804, pergunta: 'O trato Corticoespinhal Lateral √© fundamental para:', opcoes: ['Controle da postura axial.', 'Equil√≠brio vestibular.', 'Movimentos volunt√°rios finos da musculatura distal.', 'Reflexos auton√¥micos.'], correta: 2 },
                    { id: 805, pergunta: 'O que define uma Unidade Motora?', opcoes: ['Um neur√¥nio sensorial e um m√∫sculo.', 'Um neur√¥nio motor alfa e todas as fibras musculares que ele inerva.', 'O conjunto de todos os m√∫sculos de um membro.', 'A jun√ß√£o entre o tend√£o e o osso.'], correta: 1 },
                    { id: 806, pergunta: 'No reflexo de retirada (flexor), o fen√¥meno da inerva√ß√£o rec√≠proca garante que:', opcoes: ['Os dois membros flexionem ao mesmo tempo.', 'O m√∫sculo extensor antagonista seja inibido enquanto o flexor contrai.', 'O sinal v√° direto para o c√©rebro sem passar pela medula.', 'Haja contra√ß√£o isom√©trica.'], correta: 1 },
                    { id: 807, pergunta: 'Os neur√¥nios motores inferiores est√£o localizados:', opcoes: ['No c√≥rtex motor prim√°rio.', 'Nos g√¢nglios da base.', 'No corno ventral da medula espinhal.', 'No cerebelo.'], correta: 2 },
                    { id: 808, pergunta: 'A S√≠ndrome do Neur√¥nio Motor Inferior causa:', opcoes: ['Espasticidade e hiperreflexia.', 'Flacidez, atrofia e arreflexia.', 'Tremor de repouso.', 'Movimentos involunt√°rios coreicos.'], correta: 1 },
                    { id: 809, pergunta: 'O trato Vestibuloespinhal atua principalmente:', opcoes: ['Na musculatura intr√≠nseca da m√£o.', 'Na fala.', 'Nos m√∫sculos antigravitacionais para equil√≠brio.', 'Na sensibilidade dolorosa.'], correta: 2 },
                    { id: 810, pergunta: 'Qual estrutura funciona como comparador de comprimento muscular?', opcoes: ['Fuso Muscular.', 'Corp√∫sculo de Meissner.', 'Discos de Merkel.', '√ìrg√£o Tendinoso de Golgi.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta8', pergunta: 'Diferencie o reflexo miot√°tico do reflexo miot√°tico inverso em termos de est√≠mulo e resposta.', gabarito: 'Miot√°tico: Est√≠mulo √© o estiramento (comprimento); Resposta √© a contra√ß√£o do agonista. Inverso: Est√≠mulo √© a tens√£o (for√ßa); Resposta √© o relaxamento do agonista (prote√ß√£o).' }
                ]
            },
            'slide09': {
                nome: 'Slide 09: N√∫cleos da Base e Cerebelo',
                cor: 'blue',
                fechadas: [
                    { id: 901, pergunta: 'A via direta dos n√∫cleos da base tem como efeito final:', opcoes: ['Inibi√ß√£o do movimento.', 'Facilita√ß√£o (libera√ß√£o) do movimento volunt√°rio.', 'Manuten√ß√£o da postura est√°tica.', 'Gera√ß√£o de sono REM.'], correta: 1 },
                    { id: 902, pergunta: 'A Doen√ßa de Parkinson ocorre devido √† morte de neur√¥nios dopamin√©rgicos na:', opcoes: ['Subst√¢ncia Negra (Pars Compacta).', 'N√∫cleo Subtal√¢mico.', 'Globo P√°lido Interno.', 'Cerebelo.'], correta: 0 },
                    { id: 903, pergunta: 'Qual dos sintomas abaixo √© cl√°ssico de les√£o cerebelar?', opcoes: ['Tremor de repouso.', 'Rigidez em roda denteada.', 'Dismetria (erro de alvo) e Ataxia.', 'Hemineglig√™ncia.'], correta: 2 },
                    { id: 904, pergunta: 'O hemibalismo (movimentos violentos de arremesso) √© causado por les√£o no:', opcoes: ['N√∫cleo Caudado.', 'Put√¢men.', 'N√∫cleo Subtal√¢mico.', 'C√≥rtex Pr√©-frontal.'], correta: 2 },
                    { id: 905, pergunta: 'O Vestibulocerebelo (Lobo Floculonodular) √© respons√°vel por:', opcoes: ['Planejamento motor complexo.', 'Equil√≠brio e movimentos oculares.', 'Coordena√ß√£o fina dos dedos.', 'Mem√≥ria de procedimentos.'], correta: 1 },
                    { id: 906, pergunta: 'A via indireta dos n√∫cleos da base atua:', opcoes: ['Aumentando a atividade motora.', 'Suprimindo movimentos indesejados (freio).', 'Diretamente na medula espinhal.', 'Na percep√ß√£o sensorial.'], correta: 1 },
                    { id: 907, pergunta: 'O termo "Didiadococinesia" refere-se √† dificuldade em:', opcoes: ['Realizar movimentos alternados r√°pidos.', 'Iniciar o movimento.', 'Ficar em p√©.', 'Engolir.'], correta: 0 },
                    { id: 908, pergunta: 'Qual neurotransmissor √© deficit√°rio na Doen√ßa de Parkinson?', opcoes: ['Serotonina.', 'Acetilcolina.', 'Dopamina.', 'Glutamato.'], correta: 2 },
                    { id: 909, pergunta: 'O Espinocerebelo (Verme e Paraverme) controla principalmente:', opcoes: ['O planejamento cognitivo.', 'A postura e a execu√ß√£o motora de tronco e membros.', 'A frequ√™ncia card√≠aca.', 'O ciclo sono-vig√≠lia.'], correta: 1 },
                    { id: 910, pergunta: 'A Coreia de Huntington afeta primariamente:', opcoes: ['A via indireta (causando excesso de movimento).', 'A via direta (causando falta de movimento).', 'O cerebelo.', 'O c√≥rtex visual.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta9', pergunta: 'Explique o papel do cerebelo como um "comparador" motor.', gabarito: 'O cerebelo recebe a c√≥pia do comando motor (c√≥rtex) e a informa√ß√£o proprioceptiva da execu√ß√£o real (medula). Ele compara os dois e, se houver erro, envia corre√ß√µes para ajustar o movimento em tempo real.' }
                ]
            },
            'slide10': {
                nome: 'Slide 10: C√≥rtices Associativos',
                cor: 'purple',
                fechadas: [
                    { id: 1001, pergunta: 'A les√£o do C√≥rtex Parietal Posterior Direito geralmente causa:', opcoes: ['Afasia de Broca.', 'S√≠ndrome de Neglig√™ncia Unilateral (Hemineglig√™ncia).', 'Cegueira cortical.', 'Mudan√ßa de personalidade.'], correta: 1 },
                    { id: 1002, pergunta: 'A Prosopagnosia √© a incapacidade de reconhecer:', opcoes: ['Cores.', 'Faces familiares.', 'Objetos em movimento.', 'Sons da fala.'], correta: 1 },
                    { id: 1003, pergunta: 'O C√≥rtex Pr√©-Frontal Dorsolateral est√° intimamente ligado a:', opcoes: ['Fun√ß√µes executivas e mem√≥ria de trabalho.', 'Processamento visual prim√°rio.', 'Controle da frequ√™ncia respirat√≥ria.', 'Audi√ß√£o.'], correta: 0 },
                    { id: 1004, pergunta: 'O caso Phineas Gage ilustrou a import√¢ncia do lobo frontal em:', opcoes: ['Equil√≠brio.', 'Vis√£o perif√©rica.', 'Personalidade, inibi√ß√£o social e planejamento.', 'Sensibilidade t√°til.'], correta: 2 },
                    { id: 1005, pergunta: 'A via ventral do processamento visual ("O que √©?") projeta-se para:', opcoes: ['O lobo parietal.', 'O lobo temporal inferior.', 'O lobo frontal.', 'O cerebelo.'], correta: 1 },
                    { id: 1006, pergunta: 'A via dorsal do processamento visual ("Onde est√°?") projeta-se para:', opcoes: ['O lobo parietal.', 'O lobo temporal.', 'A am√≠gdala.', 'O tronco encef√°lico.'], correta: 0 },
                    { id: 1007, pergunta: 'A Afasia de Wernicke caracteriza-se por:', opcoes: ['Fala n√£o fluente e esfor√ßada.', 'Compreens√£o preservada.', 'Fala fluente mas sem sentido (logorreia) e compreens√£o prejudicada.', 'Mudez completa.'], correta: 2 },
                    { id: 1008, pergunta: 'A √°rea de Broca est√° localizada tipicamente no:', opcoes: ['Giro temporal superior.', 'Giro frontal inferior (geralmente √† esquerda).', 'C√≥rtex occipital.', 'Lobo parietal.'], correta: 1 },
                    { id: 1009, pergunta: 'Agnosia √© definida como:', opcoes: ['Perda de for√ßa muscular.', 'Incapacidade de reconhecer objetos apesar da sensa√ß√£o estar intacta.', 'Perda de mem√≥ria.', 'Cegueira total.'], correta: 1 },
                    { id: 1010, pergunta: 'O c√≥rtex de associa√ß√£o temporal est√° ligado a:', opcoes: ['Reconhecimento de objetos e mem√≥ria sem√¢ntica.', 'Aten√ß√£o espacial.', 'Planejamento motor.', 'Reflexos espinhais.'], correta: 0 }
                ],
                abertas: [
                    { id: 'aberta10', pergunta: 'Diferencie funcionalmente as √°reas de associa√ß√£o Parietal e Temporal.', gabarito: 'Parietal: Aten√ß√£o espacial, percep√ß√£o do corpo no espa√ßo (Via "Onde"). Les√£o causa Neglig√™ncia. Temporal: Reconhecimento de objetos, faces e significado (Via "O que"). Les√£o causa Agnosias.' }
                ]
            },
            'slide11': {
                nome: 'Slide 11: Sono e Vig√≠lia',
                cor: 'indigo',
                fechadas: [
                    { id: 1101, pergunta: 'O "marcapasso" central do ritmo circadiano √©:', opcoes: ['A hip√≥fise.', 'O N√∫cleo Supraquiasm√°tico (NSQ).', 'O t√°lamo.', 'O hipocampo.'], correta: 1 },
                    { id: 1102, pergunta: 'A atonia muscular (paralisia) √© uma caracter√≠stica exclusiva do:', opcoes: ['Sono N1.', 'Sono N2.', 'Sono N3.', 'Sono REM.'], correta: 3 },
                    { id: 1103, pergunta: 'Ondas Delta (lentas e de grande amplitude) predominam em:', opcoes: ['Vig√≠lia atenta.', 'Sono REM.', 'Sono N3 (Profundo).', 'Sono N1.'], correta: 2 },
                    { id: 1104, pergunta: 'A adenosina acumula-se durante a vig√≠lia e atua:', opcoes: ['Aumentando o alerta.', 'Promovendo a press√£o homeost√°tica para o sono.', 'Inibindo a produ√ß√£o de melatonina.', 'Causando sonhos v√≠vidos.'], correta: 1 },
                    { id: 1105, pergunta: 'A melatonina √© secretada pela gl√¢ndula pineal em resposta:', opcoes: ['√Ä luz intensa.', '√Ä escurid√£o.', 'Ao estresse.', '√Ä alimenta√ß√£o.'], correta: 1 },
                    { id: 1106, pergunta: 'Os Fusos do Sono (Sleep Spindles) e Complexos K aparecem no:', opcoes: ['Est√°gio N2.', 'Est√°gio REM.', 'Vig√≠lia.', 'Est√°gio N3.'], correta: 0 },
                    { id: 1107, pergunta: 'O sistema ativador reticular ascendente (SARA) √© essencial para:', opcoes: ['Manter a vig√≠lia e o alerta.', 'Induzir o sono profundo.', 'Consolidar mem√≥ria.', 'Regular a temperatura.'], correta: 0 },
                    { id: 1108, pergunta: 'A narcolepsia est√° frequentemente associada √† perda de neur√¥nios que produzem:', opcoes: ['Dopamina.', 'Hipocretina (Orexina).', 'Serotonina.', 'GABA.'], correta: 1 },
                    { id: 1109, pergunta: 'Durante o sono REM, o EEG apresenta-se:', opcoes: ['Sincronizado e lento.', 'Dessincronizado e r√°pido (semelhante √† vig√≠lia).', 'Plano (sem atividade).', 'Com ondas alfa apenas.'], correta: 1 },
                    { id: 1110, pergunta: 'O "Jet Lag" ocorre devido a:', opcoes: ['Falta de sono REM.', 'Dessincroniza√ß√£o entre o rel√≥gio biol√≥gico interno e o ciclo claro/escuro externo.', 'Excesso de melatonina.', 'Falta de adenosina.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta11', pergunta: 'Explique a intera√ß√£o entre o Processo C e o Processo S na regula√ß√£o do sono.', gabarito: 'Processo C (Circadiano): Varia√ß√£o c√≠clica do alerta promovida pelo NSQ (rel√≥gio biol√≥gico). Processo S (Homeost√°tico): Ac√∫mulo progressivo de "cansa√ßo" (adenosina) quanto mais tempo ficamos acordados. O sono ocorre quando C est√° baixo e S est√° alto.' }
                ]
            },
            'slide12': {
                nome: 'Slide 12: Mem√≥ria e Aprendizado',
                cor: 'teal',
                fechadas: [
                    { id: 1201, pergunta: 'O paciente H.M. teve o hipocampo removido e desenvolveu:', opcoes: ['Amn√©sia retr√≥grada total.', 'Incapacidade de aprender novas habilidades motoras.', 'Amn√©sia anter√≥grada severa (para novos fatos e eventos).', 'Perda da linguagem.'], correta: 2 },
                    { id: 1202, pergunta: 'A mem√≥ria processual (ex: andar de bicicleta) depende de:', opcoes: ['Hipocampo.', 'N√∫cleos da base e Cerebelo.', 'C√≥rtex Pr√©-frontal.', 'Am√≠gdala.'], correta: 1 },
                    { id: 1203, pergunta: 'A mem√≥ria de trabalho (operacional) √© gerenciada principalmente pelo:', opcoes: ['Lobo Occipital.', 'C√≥rtex Pr√©-Frontal.', 'Tronco Encef√°lico.', 'Hipot√°lamo.'], correta: 1 },
                    { id: 1204, pergunta: 'Consolida√ß√£o √© o processo de:', opcoes: ['Esquecer informa√ß√µes irrelevantes.', 'Transformar mem√≥ria de curto prazo (l√°bil) em longo prazo (est√°vel).', 'Recuperar uma mem√≥ria antiga.', 'Prestar aten√ß√£o em algo.'], correta: 1 },
                    { id: 1205, pergunta: 'A mem√≥ria epis√≥dica refere-se a:', opcoes: ['Conhecimentos gerais e fatos (ex: capital do Brasil).', 'Eventos pessoais vividos em um tempo e lugar espec√≠ficos.', 'Habilidades motoras.', 'Condicionamento cl√°ssico.'], correta: 1 },
                    { id: 1206, pergunta: 'O fen√¥meno de LTP (Potencia√ß√£o de Longa Dura√ß√£o) √© considerado:', opcoes: ['Um mecanismo celular base para o aprendizado e mem√≥ria.', 'Uma patologia do hipocampo.', 'A causa do esquecimento.', 'Um tipo de sono.'], correta: 0 },
                    { id: 1207, pergunta: 'A am√≠gdala √© crucial para qual tipo de mem√≥ria?', opcoes: ['Sem√¢ntica neutra.', 'Procedural.', 'Mem√≥ria emocional e condicionamento de medo.', 'Mem√≥ria espacial.'], correta: 2 },
                    { id: 1208, pergunta: 'Habitua√ß√£o √© um tipo de aprendizado n√£o-associativo onde:', opcoes: ['A resposta aumenta com est√≠mulos repetidos.', 'A resposta diminui com a repeti√ß√£o de um est√≠mulo in√≥cuo.', 'O indiv√≠duo associa dois est√≠mulos diferentes.', 'N√£o h√° aprendizado.'], correta: 1 },
                    { id: 1209, pergunta: 'A mem√≥ria sem√¢ntica armazena:', opcoes: ['Fatos, conceitos e significados das palavras.', 'Eventos autobiogr√°ficos.', 'Como tocar piano.', 'O medo de aranhas.'], correta: 0 },
                    { id: 1210, pergunta: 'Onde, acredita-se, as mem√≥rias de longo prazo s√£o armazenadas permanentemente?', opcoes: ['No Hipocampo.', 'Distribu√≠das pelo Neoc√≥rtex.', 'No T√°lamo.', 'Na Medula.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta12', pergunta: 'Diferencie Mem√≥ria Declarativa (Expl√≠cita) de Mem√≥ria N√£o-Declarativa (Impl√≠cita).', gabarito: 'Declarativa: Consciente, fatos e eventos (Saber "o que"), depende do hipocampo. N√£o-declarativa: Inconsciente, habilidades, h√°bitos e condicionamento (Saber "como"), depende de n√∫cleos da base/cerebelo/am√≠gdala.' }
                ]
            },
            'slide13': {
                nome: 'Slide 13: Emo√ß√µes e Sistema L√≠mbico',
                cor: 'pink',
                fechadas: [
                    { id: 1301, pergunta: 'O Circuito de Papez foi originalmente proposto como o substrato anat√¥mico de:', opcoes: ['Controle motor.', 'Vis√£o.', 'Emo√ß√µes.', 'Audi√ß√£o.'], correta: 2 },
                    { id: 1302, pergunta: 'A estimula√ß√£o da Am√≠gdala em humanos geralmente provoca:', opcoes: ['Riso incontrol√°vel.', 'Sentimento de medo e ansiedade.', 'Sono profundo.', 'Fome intensa.'], correta: 1 },
                    { id: 1303, pergunta: 'O sistema de recompensa cerebral (Via Mesol√≠mbica) utiliza o neurotransmissor:', opcoes: ['Dopamina.', 'Acetilcolina.', 'Glicina.', 'Subst√¢ncia P.'], correta: 0 },
                    { id: 1304, pergunta: 'A S√≠ndrome de Kluver-Bucy (les√£o temporal bilateral/am√≠gdala) causa:', opcoes: ['Hiperoralidade, hipersexualidade e perda do medo (mansid√£o).', 'Raiva agressiva.', 'Depress√£o.', 'Paralisia.'], correta: 0 },
                    { id: 1305, pergunta: 'O N√∫cleo Accumbens √© uma estrutura chave para:', opcoes: ['Regula√ß√£o da temperatura.', 'Recompensa, prazer e v√≠cio.', 'Vis√£o de cores.', 'Movimentos oculares.'], correta: 1 },
                    { id: 1306, pergunta: 'A express√£o fisiol√≥gica da emo√ß√£o (ex: taquicardia ao ver uma cobra) √© mediada pelo:', opcoes: ['Hipot√°lamo e SNA.', 'C√≥rtex Visual.', 'Hipocampo.', 'Cerebelo.'], correta: 0 },
                    { id: 1307, pergunta: 'A "Falsa Raiva" (Sham Rage) ocorre em animais quando:', opcoes: ['O c√≥rtex √© removido, mas o hipot√°lamo posterior fica intacto.', 'A am√≠gdala √© removida.', 'O cerebelo √© lesionado.', 'A medula √© seccionada.'], correta: 0 },
                    { id: 1308, pergunta: 'O C√≥rtex Cingulado Anterior est√° envolvido em:', opcoes: ['Avalia√ß√£o de erros e componente emocional da dor.', 'Processamento visual prim√°rio.', 'Audi√ß√£o.', 'Controle motor fino.'], correta: 0 },
                    { id: 1309, pergunta: 'Drogas de abuso (Coca√≠na, Anfetamina) atuam aumentando a dopamina no:', opcoes: ['Cerebelo.', 'N√∫cleo Accumbens.', 'Lobo Occipital.', 'T√°lamo.'], correta: 1 },
                    { id: 1310, pergunta: 'Qual √© o papel do C√≥rtex Pr√©-Frontal nas emo√ß√µes?', opcoes: ['Gerar medo.', 'Regular e inibir impulsos emocionais (controle top-down).', 'Produzir adrenalina.', 'Nenhum papel.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta13', pergunta: 'Qual a rela√ß√£o entre o C√≥rtex Pr√©-Frontal e a Am√≠gdala na regula√ß√£o emocional?', gabarito: 'A am√≠gdala gera respostas emocionais r√°pidas (medo/alerta). O c√≥rtex pr√©-frontal avalia o contexto e exerce controle inibit√≥rio sobre a am√≠gdala, permitindo adequar a resposta emocional √† situa√ß√£o social.' }
                ]
            },
            'slide14': {
                nome: 'Slide 14: Sistema Nervoso Auton√¥mico',
                cor: 'red',
                fechadas: [
                    { id: 1401, pergunta: 'As fibras pr√©-ganglionares do sistema simp√°tico liberam:', opcoes: ['Noradrenalina.', 'Acetilcolina.', 'Dopamina.', 'Serotonina.'], correta: 1 },
                    { id: 1402, pergunta: 'Os receptores nos √≥rg√£os efetores do sistema parassimp√°tico s√£o:', opcoes: ['Nicot√≠nicos.', 'Muscar√≠nicos.', 'Adren√©rgicos Alfa.', 'Adren√©rgicos Beta.'], correta: 1 },
                    { id: 1403, pergunta: 'A medula da adrenal funciona funcionalmente como:', opcoes: ['Um g√¢nglio parassimp√°tico.', 'Um g√¢nglio simp√°tico modificado (libera adrenalina no sangue).', 'Uma gl√¢ndula ex√≥crina.', 'Parte do c√≥rtex motor.'], correta: 1 },
                    { id: 1404, pergunta: 'O efeito simp√°tico no cora√ß√£o √©:', opcoes: ['Diminui√ß√£o da frequ√™ncia (bradicardia).', 'Aumento da frequ√™ncia e da for√ßa de contra√ß√£o.', 'Apenas diminui√ß√£o da for√ßa.', 'Nenhum efeito.'], correta: 1 },
                    { id: 1405, pergunta: 'O principal centro integrador da termorregula√ß√£o √©:', opcoes: ['O Hipot√°lamo.', 'O Bulbo.', 'A Ponte.', 'O T√°lamo.'], correta: 0 },
                    { id: 1406, pergunta: 'A febre difere da hipertermia porque na febre:', opcoes: ['H√° falha na perda de calor.', 'O "Set Point" (ponto de ajuste) hipotal√¢mico √© elevado por pirog√™nios.', 'A temperatura n√£o passa de 37 graus.', 'Ocorre apenas em dias quentes.'], correta: 1 },
                    { id: 1407, pergunta: 'A resposta pupilar √† ativa√ß√£o parassimp√°tica √©:', opcoes: ['Midr√≠ase (Dilata√ß√£o).', 'Miose (Contra√ß√£o).', 'Nenhuma.', 'Tremor.'], correta: 1 },
                    { id: 1408, pergunta: 'O sistema nervoso parassimp√°tico tem origem:', opcoes: ['Toracolombar.', 'Craniossacral.', 'Apenas cervical.', 'Apenas lombar.'], correta: 1 },
                    { id: 1409, pergunta: 'Para perder calor, o corpo promove:', opcoes: ['Vasoconstri√ß√£o cut√¢nea e tremores.', 'Vasodilata√ß√£o cut√¢nea e sudorese.', 'Piloere√ß√£o.', 'Aumento do metabolismo.'], correta: 1 },
                    { id: 1410, pergunta: 'O nervo Vago (X par) carrega a maior parte das fibras:', opcoes: ['Simp√°ticas.', 'Parassimp√°ticas.', 'Motoras som√°ticas.', 'Sensoriais de dor.'], correta: 1 }
                ],
                abertas: [
                    { id: 'aberta14', pergunta: 'Explique o mecanismo da febre e como ela difere da hipertermia por exerc√≠cio.', gabarito: 'Na febre, pirog√™nios (IL-1, PGE2) elevam o "ponto de ajuste" do hipot√°lamo; o corpo sente frio e produz calor para chegar nesse novo n√≠vel. Na hipertermia, o ponto de ajuste est√° normal, mas o corpo ganha mais calor do que consegue dissipar (falha na refrigera√ß√£o).' }
                ]
            }
        };

        // --- L√ìGICA DO APP ---

        let activeClosedQuestions = {}; // Guarda as 5 perguntas selecionadas por slide
        let activeOpenQuestions = [];   // Guarda as quest√µes abertas selecionadas
        let userResponsesClosed = {};
        let userResponsesOpen = {};
        let isVerified = false;
        let isOpenVerified = false;
        let timeRemaining = 5400; // 90 minutos
        let timerInterval;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60).toString().padStart(2, '0');
            const s = (seconds % 60).toString().padStart(2, '0');
            return `${Math.floor(m/60)}h ${m%60}m ${s}s`;
        }

        // Inicializa√ß√£o: Seleciona as perguntas
        function initQuiz() {
            activeClosedQuestions = {};
            activeOpenQuestions = [];
            
            // Para cada slide, pega 5 fechadas aleat√≥rias e 1 aberta
            Object.keys(SLIDE_DATA).forEach(key => {
                const pool = SLIDE_DATA[key];
                
                // 5 Fechadas
                const shuffledClosed = shuffleArray([...pool.fechadas]);
                activeClosedQuestions[key] = shuffledClosed.slice(0, 5);
                
                // 1 Aberta
                if (pool.abertas.length > 0) {
                    const randomOpen = pool.abertas[Math.floor(Math.random() * pool.abertas.length)];
                    activeOpenQuestions.push({
                        ...randomOpen,
                        slideName: pool.nome,
                        slideColor: pool.cor,
                        slideKey: key
                    });
                }
            });
            
            // Embaralha a ordem das abertas para n√£o ficar sempre na mesma sequencia de slides (opcional, aqui mantive ordem de inser√ß√£o ou pode embaralhar)
            // activeOpenQuestions = shuffleArray(activeOpenQuestions); 

            renderHeader();
            renderClosedSection();
            renderOpenSection();
            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                document.getElementById('timer-display').innerText = formatTime(timeRemaining);
                if (timeRemaining <= 300) {
                    document.getElementById('timer-box').classList.add('bg-red-600', 'time-up');
                    document.getElementById('timer-box').classList.remove('bg-slate-700');
                }
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    verifyClosedAnswers();
                }
            }, 1000);
        }

        // --- RENDERIZA√á√ÉO ---

        function renderHeader() {
            const totalQ = Object.keys(activeClosedQuestions).length * 5 + activeOpenQuestions.length;
            document.getElementById('header-container').innerHTML = `
                <header class="bg-slate-800 text-white p-6 rounded-xl shadow-lg flex flex-col md:flex-row justify-between items-center gap-4">
                    <div>
                        <h1 class="text-2xl font-bold">Simulado Neurofisiologia</h1>
                        <p class="text-slate-400 text-sm">Slides 08 a 14 ‚Ä¢ ${totalQ} Quest√µes</p>
                    </div>
                    <div id="timer-box" class="bg-slate-700 px-4 py-2 rounded-lg font-mono text-xl font-bold transition-colors">
                        <span id="timer-display">${formatTime(timeRemaining)}</span>
                    </div>
                </header>
            `;
        }

        function renderClosedSection() {
            const container = document.getElementById('closed-questions-section');
            let html = `<h2 class="text-2xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 flex items-center gap-2">
                            <span>üìù</span> Parte A: Quest√µes Objetivas (5 por Slide)
                        </h2>`;

            Object.keys(SLIDE_DATA).forEach((slideKey) => {
                const slideInfo = SLIDE_DATA[slideKey];
                const questions = activeClosedQuestions[slideKey];
                
                html += `
                    <div class="bg-white rounded-xl shadow-md overflow-hidden border-t-4 border-${slideInfo.cor}-500">
                        <div class="bg-slate-50 p-4 border-b border-slate-100">
                            <h3 class="font-bold text-lg text-${slideInfo.cor}-700 flex items-center gap-2">
                                üìÇ ${slideInfo.nome}
                            </h3>
                        </div>
                        <div class="p-6 space-y-8">
                `;

                questions.forEach((q, idx) => {
                    const userVal = userResponsesClosed[q.id];
                    
                    let optionsHtml = '';
                    q.opcoes.forEach((opt, optIdx) => {
                        let btnClass = "w-full text-left p-3 rounded border transition-all ";
                        let icon = "";
                        
                        if (!isVerified) {
                            if (userVal === optIdx) btnClass += `bg-${slideInfo.cor}-100 border-${slideInfo.cor}-500 ring-1 ring-${slideInfo.cor}-500`;
                            else btnClass += "hover:bg-slate-50 border-slate-200";
                        } else {
                            if (optIdx === q.correta) {
                                btnClass += "bg-green-100 border-green-500 font-semibold";
                                icon = "‚úÖ";
                            } else if (userVal === optIdx && userVal !== q.correta) {
                                btnClass += "bg-red-100 border-red-500 text-red-700 line-through";
                                icon = "‚ùå";
                            } else {
                                btnClass += "opacity-60 border-slate-200";
                            }
                        }

                        optionsHtml += `
                            <button onclick="handleClosedClick('${slideKey}', ${q.id}, ${optIdx})" 
                                    ${isVerified ? 'disabled' : ''}
                                    class="${btnClass} mb-2 relative group">
                                <span class="font-mono text-xs font-bold text-slate-500 mr-2">${String.fromCharCode(65+optIdx)})</span>
                                ${opt}
                                <span class="absolute right-3 top-3">${icon}</span>
                            </button>
                        `;
                    });

                    html += `
                        <div class="question-block">
                            <p class="font-medium text-slate-800 mb-3"><span class="text-slate-400 text-sm mr-1">#${idx+1}</span> ${q.pergunta}</p>
                            <div>${optionsHtml}</div>
                        </div>
                    `;
                });

                html += `</div></div>`;
            });

            if (!isVerified) {
                html += `
                    <div class="flex justify-end pt-4">
                        <button onclick="verifyClosedAnswers()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:scale-105">
                            Finalizar Parte A
                        </button>
                    </div>
                `;
            } else {
                html += `<div class="text-center p-4 bg-blue-50 text-blue-800 font-bold rounded-lg border border-blue-200">Parte A Finalizada! Confira seu desempenho acima.</div>`;
            }

            container.innerHTML = html;
        }

        function renderOpenSection() {
            const container = document.getElementById('open-questions-section');
            let html = `<h2 class="text-2xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 flex items-center gap-2 mt-12">
                            <span>‚úçÔ∏è</span> Parte B: Quest√µes Discursivas (1 por Slide)
                        </h2>`;

            activeOpenQuestions.forEach((q, idx) => {
                const userText = userResponsesOpen[q.id] || '';
                
                html += `
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-${q.slideColor}-500">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="font-semibold text-lg text-slate-800"><span class="text-${q.slideColor}-600 mr-2">${idx+1}.</span> ${q.pergunta}</h3>
                            <span class="text-xs font-bold px-2 py-1 rounded bg-${q.slideColor}-100 text-${q.slideColor}-700">${q.slideName}</span>
                        </div>
                        
                        <textarea oninput="handleOpenInput('${q.id}', this.value)"
                            ${isOpenVerified ? 'disabled' : ''}
                            class="w-full p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-${q.slideColor}-400 outline-none text-slate-700 resize-y min-h-[100px]"
                            placeholder="Escreva sua resposta aqui...">${userText}</textarea>
                        
                        ${isOpenVerified ? `
                            <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg animate-fade-in">
                                <p class="text-sm font-bold text-green-800 mb-1">Gabarito Sugerido:</p>
                                <p class="text-slate-700 text-sm leading-relaxed">${q.gabarito}</p>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            if (!isOpenVerified) {
                html += `
                    <div class="flex justify-end pt-4">
                        <button onclick="verifyOpenAnswers()" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:scale-105">
                            Ver Gabaritos (Parte B)
                        </button>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // --- HANDLERS ---

        window.handleClosedClick = (slideKey, qId, optIdx) => {
            if (isVerified) return;
            userResponsesClosed[qId] = optIdx;
            // Re-renderiza apenas para atualizar UI (idealmente seria reatividade fina, mas aqui rerenderizamos a se√ß√£o)
            renderClosedSection();
        };

        window.handleOpenInput = (qId, val) => {
            userResponsesOpen[qId] = val;
        };

        window.verifyClosedAnswers = () => {
            if (isVerified) return;
            clearInterval(timerInterval);
            isVerified = true;
            
            // Calcula Pontua√ß√£o
            let correct = 0;
            let total = 0;
            let summaryHTML = '<div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">';
            
            Object.keys(SLIDE_DATA).forEach(key => {
                let slideCorrect = 0;
                activeClosedQuestions[key].forEach(q => {
                    total++;
                    if (userResponsesClosed[q.id] === q.correta) {
                        correct++;
                        slideCorrect++;
                    }
                });
                const percent = (slideCorrect / 5) * 100;
                const info = SLIDE_DATA[key];
                summaryHTML += `
                    <div class="bg-white p-3 rounded border-l-4 border-${info.cor}-500 shadow-sm">
                        <div class="text-xs text-slate-500 truncate">${info.nome}</div>
                        <div class="font-bold text-xl text-slate-800">${slideCorrect}/5</div>
                    </div>
                `;
            });
            summaryHTML += '</div>';

            const finalScore = Math.round((correct / total) * 100);
            const msgClass = finalScore >= 70 ? 'text-green-600' : (finalScore >= 50 ? 'text-yellow-600' : 'text-red-600');

            document.getElementById('results-summary').innerHTML = `
                <div class="bg-slate-200 p-6 rounded-xl border border-slate-300 mb-8 animate-fade-in-down">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4 text-center">Resultado Final: <span class="${msgClass}">${correct}/${total} (${finalScore}%)</span></h2>
                    ${summaryHTML}
                </div>
            `;
            
            // Scroll para o topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
            renderClosedSection();
            renderHeader(); // Para parar o timer visualmente se quiser
        };

        window.verifyOpenAnswers = () => {
            isOpenVerified = true;
            renderOpenSection();
        };

        // Iniciar
        initQuiz();

    </script>
</body>
</html>
