<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Completo de Neurofisiologia (Por Slide)</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background-color: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        .time-up { animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { background-color: #ef4444; } 50% { background-color: #b91c1c; } }
    </style>
</head>
<body class="bg-slate-100 min-h-screen font-sans">

    <div id="root" class="max-w-6xl mx-auto p-4 sm:p-8">
        <div id="header-container"></div>
        <div id="results-summary"></div>
        <section id="closed-questions-section" class="space-y-10 mb-10"></section>
        <section id="open-questions-section" class="space-y-6"></section>
        <div id="footer-container"></div>
    </div>

    <script>
        // --- DADOS: QUEST√ïES SEPARADAS POR SLIDE (ARQUIVO) ---
        const FULL_POOLS = {
            'slide08': {
                nome: 'Slide 08: Medula Espinhal e Reflexos',
                cor: 'orange',
                fechadas: [
                    { id: 801, pergunta: 'Qual a fun√ß√£o principal do √ìrg√£o Tendinoso de Golgi (OTG) no reflexo miot√°tico inverso?', opcoes: ['Detectar o estiramento muscular.', 'Proteger o m√∫sculo contra cargas/tens√£o excessivas.', 'Ativar diretamente os motoneur√¥nios alfa.', 'Detectar mudan√ßas de temperatura.'], correta: 1, tema: 'slide08' },
                    { id: 802, pergunta: 'No reflexo patelar (miot√°tico), o est√≠mulo inicial √© detectado por qual estrutura?', opcoes: ['Termina√ß√£o nervosa livre.', 'Corp√∫sculo de Pacini.', 'Fuso Muscular.', 'Interneur√¥nio inibit√≥rio.'], correta: 2, tema: 'slide08' },
                    { id: 803, pergunta: 'O que caracteriza a rigidez de descerebra√ß√£o em termos de postura?', opcoes: ['Flex√£o dos membros superiores e extens√£o dos inferiores.', 'Extens√£o dos quatro membros.', 'Flacidez muscular generalizada.', 'Flex√£o de todos os membros.'], correta: 1, tema: 'slide08' }
                ],
                abertas: [
                    { id: 804, pergunta: 'Explique o mecanismo da "Inerva√ß√£o Rec√≠proca" no reflexo flexor de retirada.', gabarito: '**Resposta:** Ao mesmo tempo que os m√∫sculos flexores s√£o excitados para retirar o membro do est√≠mulo doloroso, os m√∫sculos extensores antagonistas s√£o inibidos. [cite_start]**Contexto:** Isso ocorre via interneur√¥nios inibit√≥rios na medula, garantindo que o movimento ocorra sem resist√™ncia do m√∫sculo oposto[cite: 736].', tema: 'slide08', resposta: '' }
                ]
            },
            'slide09': {
                nome: 'Slide 09: Controle Motor (N√∫cleos da Base e Cerebelo)',
                cor: 'blue',
                fechadas: [
                    { id: 901, pergunta: 'Qual √© o papel principal da "Via Direta" nos n√∫cleos da base?', opcoes: ['Inibir o t√°lamo e frear o movimento.', 'Liberar (facilitar) o movimento desejado.', 'Suprimir movimentos concorrentes.', 'Gerar reflexos espinhais.'], correta: 1, tema: 'slide09' },
                    { id: 902, pergunta: 'A Doen√ßa de Parkinson √© caracterizada pela degenera√ß√£o de qual estrutura?', opcoes: ['N√∫cleo Caudado.', 'Subst√¢ncia Negra (Pars Compacta).', 'Globo P√°lido Externo.', 'N√∫cleo Subtal√¢mico.'], correta: 1, tema: 'slide09' },
                    { id: 903, pergunta: 'Qual √© a principal consequ√™ncia motora de les√µes no Cerebelo?', opcoes: ['Paralisia total.', 'Tremor de repouso.', 'Ataxia (falta de coordena√ß√£o) e Dismetria.', 'Rigidez muscular.'], correta: 2, tema: 'slide09' }
                ],
                abertas: [
                    { id: 904, pergunta: 'Como o cerebelo atua como um "comparador" no controle motor?', gabarito: '**Resposta:** Ele compara o plano motor (inten√ß√£o) vindo do c√≥rtex com a execu√ß√£o real (propriocep√ß√£o) vinda da medula. [cite_start]**Contexto:** Se houver erro, ele envia sinais corretivos para o sistema motor para ajustar o movimento em tempo real[cite: 156].', tema: 'slide09', resposta: '' }
                ]
            },
            'slide10': {
                nome: 'Slide 10: C√≥rtices Associativos e Aten√ß√£o',
                cor: 'purple',
                fechadas: [
                    { id: 1001, pergunta: 'A S√≠ndrome de Neglig√™ncia Unilateral √© tipicamente causada por les√£o em qual √°rea?', opcoes: ['Lobo Frontal Esquerdo.', 'C√≥rtex Parietal Direito (Posterior).', 'Lobo Temporal Bilateral.', 'C√≥rtex Occipital.'], correta: 1, tema: 'slide10' },
                    { id: 1002, pergunta: 'A incapacidade de reconhecer faces familiares (Prosopagnosia) est√° associada a les√µes no:', opcoes: ['C√≥rtex Pr√©-frontal.', 'Lobo Parietal.', 'C√≥rtex Temporal Inferior.', 'C√≥rtex Motor.'], correta: 2, tema: 'slide10' },
                    { id: 1003, pergunta: 'O caso de Phineas Gage evidenciou a fun√ß√£o do C√≥rtex Pr√©-Frontal em:', opcoes: ['Vis√£o e audi√ß√£o.', 'Mem√≥ria de longo prazo.', 'Personalidade, planejamento e inibi√ß√£o social.', 'Controle motor fino.'], correta: 2, tema: 'slide10' }
                ],
                abertas: [
                    { id: 1004, pergunta: 'Diferencie as fun√ß√µes das √°reas de associa√ß√£o Parietal e Temporal.', gabarito: '**Resposta:** Parietal: Aten√ß√£o e percep√ß√£o espacial ("Onde est√°?"). Temporal: Reconhecimento e identifica√ß√£o de objetos e faces ("O que √©?"). [cite_start]**Contexto:** Les√£o parietal gera neglig√™ncia; les√£o temporal gera agnosias[cite: 511, 530].', tema: 'slide10', resposta: '' }
                ]
            },
            'slide11': {
                nome: 'Slide 11: Ciclo Sono-Vig√≠lia',
                cor: 'indigo',
                fechadas: [
                    { id: 1101, pergunta: 'Qual est√°gio do sono √© caracterizado por atonia muscular (paralisia) e EEG dessincronizado (similar √† vig√≠lia)?', opcoes: ['Sono N1.', 'Sono N2.', 'Sono N3 (Ondas Lentas).', 'Sono REM (Paradoxal).'], correta: 3, tema: 'slide11' },
                    { id: 1102, pergunta: 'Qual estrutura atua como o principal "rel√≥gio biol√≥gico" (marcapasso circadiano)?', opcoes: ['N√∫cleo Supraquiasm√°tico (NSQ).', 'Hipocampo.', 'Am√≠gdala.', 'T√°lamo Posterior.'], correta: 0, tema: 'slide11' },
                    { id: 1103, pergunta: 'A melatonina, horm√¥nio que sinaliza a escurid√£o, √© produzida pela:', opcoes: ['Hip√≥fise.', 'Gl√¢ndula Pineal.', 'Tireoide.', 'Adrenal.'], correta: 1, tema: 'slide11' }
                ],
                abertas: [
                    { id: 1104, pergunta: 'O que √© o "Processo C" e o "Processo S" na regula√ß√£o do sono?', gabarito: '**Resposta:** Processo C √© o ritmo circadiano (rel√≥gio biol√≥gico/alerta). Processo S √© a press√£o homeost√°tica do sono (ac√∫mulo de adenosina). [cite_start]**Contexto:** O sono ocorre quando a press√£o S √© alta e o alerta C diminui[cite: 1229].', tema: 'slide11', resposta: '' }
                ]
            },
            'slide12': {
                nome: 'Slide 12: Aprendizado e Mem√≥ria',
                cor: 'teal',
                fechadas: [
                    { id: 1201, pergunta: 'A mem√≥ria expl√≠cita (declarativa) depende fundamentalmente de qual estrutura para sua consolida√ß√£o?', opcoes: ['Cerebelo.', 'Am√≠gdala.', 'Hipocampo (Lobo Temporal Medial).', 'G√¢nglios da Base.'], correta: 2, tema: 'slide12' },
                    { id: 1202, pergunta: 'A mem√≥ria de procedimentos (ex: andar de bicicleta) √© um tipo de:', opcoes: ['Mem√≥ria Epis√≥dica.', 'Mem√≥ria Sem√¢ntica.', 'Mem√≥ria Impl√≠cita (N√£o-declarativa).', 'Mem√≥ria de Curta Dura√ß√£o.'], correta: 2, tema: 'slide12' },
                    { id: 1203, pergunta: 'O famoso paciente H.M. sofria principalmente de:', opcoes: ['Amn√©sia Retr√≥grada total.', 'Amn√©sia Anter√≥grada (incapacidade de formar novas mem√≥rias expl√≠citas).', 'Perda de mem√≥ria motora.', 'Afasia de Broca.'], correta: 1, tema: 'slide12' }
                ],
                abertas: [
                    { id: 1204, pergunta: 'O que √© consolida√ß√£o da mem√≥ria e qual o papel do sono nela?', gabarito: '**Resposta:** Consolida√ß√£o √© a estabiliza√ß√£o de uma mem√≥ria l√°bil (curto prazo) em est√°vel (longo prazo). [cite_start]**Contexto:** O sono (especialmente REM e ondas lentas) √© crucial para reprocessar e fixar essas informa√ß√µes no c√≥rtex[cite: 218].', tema: 'slide12', resposta: '' }
                ]
            },
            'slide13': {
                nome: 'Slide 13: Emo√ß√µes e Sistema L√≠mbico',
                cor: 'pink',
                fechadas: [
                    { id: 1301, pergunta: 'A Am√≠gdala √© fundamental para o processamento de qual emo√ß√£o b√°sica?', opcoes: ['Alegria.', 'Nojo.', 'Medo.', 'Surpresa.'], correta: 2, tema: 'slide13' },
                    { id: 1302, pergunta: 'Qual neurotransmissor √© central na "Via Mesol√≠mbica" do sistema de recompensa?', opcoes: ['Serotonina.', 'Dopamina.', 'Acetilcolina.', 'GABA.'], correta: 1, tema: 'slide13' },
                    { id: 1303, pergunta: 'A Doen√ßa de Urbach-Wiethe causa calcifica√ß√£o da am√≠gdala, resultando em:', opcoes: ['Mem√≥ria fotogr√°fica.', 'Perda da capacidade de sentir e reconhecer medo.', 'Raiva incontrol√°vel.', 'Depress√£o profunda.'], correta: 1, tema: 'slide13' }
                ],
                abertas: [
                    { id: 1304, pergunta: 'Descreva o "Circuito de Papez" original e sua fun√ß√£o proposta.', gabarito: '**Resposta:** Um circuito fechado envolvendo Hipot√°lamo -> T√°lamo Anterior -> C√≥rtex Cingulado -> Hipocampo -> Hipot√°lamo. [cite_start]**Contexto:** Foi proposto originalmente como o substrato anat√¥mico das emo√ß√µes e da experi√™ncia subjetiva (sentimentos)[cite: 848].', tema: 'slide13', resposta: '' }
                ]
            },
            'slide14': {
                nome: 'Slide 14: Sistema Nervoso Auton√¥mico (SNA)',
                cor: 'red',
                fechadas: [
                    { id: 1401, pergunta: 'Qual o principal neurotransmissor p√≥s-ganglionar do Sistema Simp√°tico (na maioria dos √≥rg√£os)?', opcoes: ['Acetilcolina.', 'Noradrenalina.', 'Serotonina.', 'Dopamina.'], correta: 1, tema: 'slide14' },
                    { id: 1402, pergunta: 'O sistema parassimp√°tico promove quais efeitos no cora√ß√£o e na pupila?', opcoes: ['Taquicardia e Midr√≠ase (dilata√ß√£o).', 'Bradicardia e Miose (contra√ß√£o).', 'Taquicardia e Miose.', 'Bradicardia e Midr√≠ase.'], correta: 1, tema: 'slide14' },
                    { id: 1403, pergunta: 'Qual regi√£o do enc√©falo √© o principal centro integrador da homeostase e termorregula√ß√£o?', opcoes: ['T√°lamo.', 'Cerebelo.', 'Hipot√°lamo.', 'Hipocampo.'], correta: 2, tema: 'slide14' }
                ],
                abertas: [
                    { id: 1404, pergunta: 'Como o corpo responde ao aumento da temperatura corporal (hipertermia) via SNA?', gabarito: '**Resposta:** O hipot√°lamo detecta o calor e ativa o sistema simp√°tico colin√©rgico (exce√ß√£o) para gl√¢ndulas sudor√≠paras (suor) e inibe o simp√°tico adren√©rgico cut√¢neo (causando vasodilata√ß√£o). [cite_start]**Contexto:** Isso promove perda de calor por evapora√ß√£o e irradia√ß√£o[cite: 468].', tema: 'slide14', resposta: '' }
                ]
            }
        };

        // --- L√ìGICA DA APLICA√á√ÉO ---
        let allClosedQuestions = [];
        let allOpenQuestions = [];
        let respostasFechadas = {};
        let resultadosFechadas = null;
        let verificadas = false;
        let abertasVerificadas = false;
        let tempoRestante = 5400; 
        let timerId = null;
        let timeIsUp = false;

        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function getOptionClass(q, index) {
            if (!verificadas) {
                return respostasFechadas[q.id] === index ? 'bg-blue-200 border-blue-600' : 'hover:bg-gray-100 border-gray-300';
            }
            if (index === q.correta) return 'bg-green-100 border-green-600 font-bold';
            if (respostasFechadas[q.id] === index) return 'bg-red-100 border-red-600 line-through';
            return 'bg-white border-gray-300';
        }

        function getResumoPorTema() {
            if (!verificadas) return {};
            const temas = {};
            Object.keys(FULL_POOLS).forEach(key => {
                temas[key] = { acertos: 0, total: 0, nome: FULL_POOLS[key].nome, cor: FULL_POOLS[key].cor };
            });
            allClosedQuestions.forEach(q => {
                const temaKey = q.tema;
                if (temas[temaKey]) {
                    temas[temaKey].total++;
                    if (respostasFechadas[q.id] === q.correta) temas[temaKey].acertos++;
                }
            });
            return temas;
        }

        function renderHeader() {
            const container = document.getElementById('header-container');
            const timerClass = timeIsUp ? 'bg-red-600 text-white time-up' : 'bg-slate-700';
            container.innerHTML = `
                <header class="bg-slate-800 text-white p-6 rounded-xl shadow-2xl mb-8 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <div class="flex items-center gap-4">
                        <span class="w-8 h-8 text-blue-400 text-3xl">üß†</span>
                        <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">Simulado de Neurofisiologia</h1>
                    </div>
                    <div class="flex items-center gap-6">
                        <div id="timer-display" class="flex items-center gap-2 p-2 rounded-lg ${timerClass}">
                            <span class="w-5 h-5 text-yellow-400">‚è≥</span>
                            <span class="font-mono text-lg">${formatTime(tempoRestante)}</span>
                        </div>
                        <div class="flex items-center gap-2 bg-slate-700 p-2 rounded-lg">
                            <span class="w-5 h-5 text-red-400">üìä</span>
                            <span class="font-semibold text-lg">${allClosedQuestions.length + allOpenQuestions.length} Quest√µes</span>
                        </div>
                    </div>
                </header>
            `;
        }

        function renderResultsSummary() {
            const container = document.getElementById('results-summary');
            if (!verificadas || !resultadosFechadas) { container.innerHTML = ''; return; }

            const resumoPorTema = getResumoPorTema();
            let temaHtml = '';
            Object.values(resumoPorTema).forEach(tema => {
                if (tema.total === 0) return;
                const percentage = ((tema.acertos / tema.total) * 100).toFixed(0);
                temaHtml += `
                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md border-l-4 border-${tema.cor}-500">
                        <span class="text-sm font-medium text-slate-700">${tema.nome}</span>
                        <span class="font-bold text-md text-${tema.cor}-700">${tema.acertos}/${tema.total} (${percentage}%)</span>
                    </div>`;
            });

            container.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-green-500 mb-8">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">‚úÖ Resultado</h2>
                    <div class="grid grid-cols-3 gap-4 mb-6 text-center">
                        <div class="p-3 bg-green-50 rounded border border-green-200"><p class="text-2xl font-bold text-green-700">${resultadosFechadas.acertos}</p><p class="text-xs text-green-600">Acertos</p></div>
                        <div class="p-3 bg-red-50 rounded border border-red-200"><p class="text-2xl font-bold text-red-700">${resultadosFechadas.incorretos}</p><p class="text-xs text-red-600">Erros</p></div>
                        <div class="p-3 bg-yellow-50 rounded border border-yellow-200"><p class="text-2xl font-bold text-yellow-700">${resultadosFechadas.naoRespondidas}</p><p class="text-xs text-yellow-600">Em branco</p></div>
                    </div>
                    <div class="space-y-2">${temaHtml}</div>
                </section>
            `;
        }

        function renderClosedQuestions() {
            const container = document.getElementById('closed-questions-section');
            let html = `<h2 class="text-3xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 mb-8">üìù Parte A: M√∫ltipla Escolha</h2>`;
            let qNum = 0;

            Object.keys(FULL_POOLS).forEach(key => {
                const tema = FULL_POOLS[key];
                const questions = allClosedQuestions.filter(q => q.tema === key);
                if (questions.length === 0) return;

                html += `<div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-${tema.cor}-500 mb-8">
                            <h3 class="text-xl font-bold text-${tema.cor}-700 mb-4">${tema.nome}</h3><div class="space-y-6">`;
                
                questions.forEach(q => {
                    qNum++;
                    let opts = '';
                    q.opcoes.forEach((opt, idx) => {
                        const cls = getOptionClass(q, idx);
                        const badge = (verificadas && idx === q.correta) ? '<span class="text-green-700 font-bold ml-2">‚úî</span>' : '';
                        const disabled = verificadas ? 'disabled' : '';
                        opts += `<button onclick="handleRespostaFechada(${q.id}, ${idx})" ${disabled} class="w-full text-left p-3 rounded border transition-colors ${cls}">
                                    <span class="font-mono font-bold mr-2">${String.fromCharCode(65+idx)}.</span>${opt} ${badge}
                                 </button>`;
                    });
                    html += `<div class="p-4 border-b border-slate-100 last:border-0"><p class="font-semibold text-slate-800 mb-3">${qNum}. ${q.pergunta}</p><div class="space-y-2">${opts}</div></div>`;
                });
                html += `</div></div>`;
            });

            const btn = !verificadas ? 
                `<button onclick="handleVerificar()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded shadow transition-colors">Finalizar e Corrigir</button>` :
                `<div class="px-6 py-3 bg-slate-400 text-white font-bold rounded cursor-not-allowed">Corrigido</div>`;

            html += `<div class="flex justify-end mt-4">${btn}</div>`;
            container.innerHTML = html;
        }

        function renderOpenQuestions() {
            const container = document.getElementById('open-questions-section');
            let html = `<h2 class="text-3xl font-bold text-slate-700 border-b-2 border-slate-300 pb-2 mb-8">‚úçÔ∏è Parte B: Discursivas</h2>`;
            let qNum = 0;

            allOpenQuestions.forEach(q => {
                qNum++;
                const tema = FULL_POOLS[q.tema];
                const gabarito = abertasVerificadas ? `<div class="mt-4 p-4 bg-green-50 rounded border border-green-200 text-sm text-slate-800"><strong>Gabarito:</strong> ${q.gabarito}</div>` : '';
                
                html += `<div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-${tema.cor}-500 mb-6">
                            <p class="text-lg font-semibold text-slate-800 mb-2"><span class="text-${tema.cor}-600 mr-2">${qNum}.</span> ${q.pergunta}</p>
                            <p class="text-xs text-slate-500 mb-3 uppercase tracking-wide">${tema.nome}</p>
                            <textarea oninput="handleRespostaAberta(${q.id}, this.value)" ${abertasVerificadas ? 'disabled' : ''} rows="4" class="w-full p-3 border rounded focus:ring-2 focus:ring-${tema.cor}-400 outline-none" placeholder="Sua resposta...">${q.resposta}</textarea>
                            ${gabarito}
                         </div>`;
            });

            const btn = !abertasVerificadas ?
                `<button onclick="handleLiberarGabaritosAbertas()" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-6 rounded shadow transition-colors">Ver Gabaritos</button>` :
                `<div class="px-6 py-3 bg-slate-400 text-white font-bold rounded cursor-not-allowed">Gabaritos Vis√≠veis</div>`;

            html += `<div class="flex justify-end mt-4">${btn}</div>`;
            container.innerHTML = html;
        }

        function renderFooter() {
            document.getElementById('footer-container').innerHTML = `<footer class="mt-10 pt-6 border-t text-center text-slate-500 text-sm"><p>Simulado Gerado Automaticamente - Baseado nos Slides de Neurofisiologia</p></footer>`;
        }

        // --- LOGICA ---
        function handleRespostaFechada(id, index) {
            if (verificadas || timeIsUp) return;
            respostasFechadas[id] = index;
            renderClosedQuestions();
        }

        function handleRespostaAberta(id, val) {
            const q = allOpenQuestions.find(x => x.id === id);
            if (q) q.resposta = val;
        }

        function handleVerificar() {
            if (verificadas) return;
            clearInterval(timerId);
            verificadas = true;
            let acertos = 0, incorretos = 0;
            allClosedQuestions.forEach(q => {
                if (respostasFechadas[q.id] === q.correta) acertos++;
                else if (respostasFechadas[q.id] !== undefined) incorretos++;
            });
            resultadosFechadas = { acertos, incorretos, naoRespondidas: allClosedQuestions.length - acertos - incorretos };
            renderApp();
            // Scroll to summary
            document.getElementById('results-summary').scrollIntoView({ behavior: 'smooth' });
        }

        function handleLiberarGabaritosAbertas() {
            abertasVerificadas = true;
            renderOpenQuestions();
        }

        function initializeQuestions() {
            allClosedQuestions = [];
            allOpenQuestions = [];
            // Pega 2 fechadas e 1 aberta de cada slide para balancear
            Object.keys(FULL_POOLS).forEach(key => {
                const pool = FULL_POOLS[key];
                const fechadas = shuffle([...pool.fechadas]).slice(0, 2); // 2 por slide
                const abertas = shuffle([...pool.abertas]).slice(0, 1);   // 1 por slide
                allClosedQuestions.push(...fechadas);
                allOpenQuestions.push(...abertas.map(q => ({...q, resposta: ''})));
            });
            // N√£o embaralha a ordem dos temas (mant√©m ordem logica dos slides), mas embaralha as questoes dentro se quiser
            // Para manter agrupado por tema na UI, n√£o embaralhamos o array final
        }

        function startTimer() {
            if (timerId) clearInterval(timerId);
            timerId = setInterval(() => {
                if (tempoRestante <= 0) {
                    clearInterval(timerId);
                    timeIsUp = true;
                    if (!verificadas) handleVerificar();
                    renderApp();
                    return;
                }
                tempoRestante--;
                const span = document.querySelector('#timer-display span:last-child');
                if (span) span.textContent = formatTime(tempoRestante);
            }, 1000);
        }

        function renderApp() {
            renderHeader();
            renderResultsSummary();
            renderClosedQuestions();
            renderOpenQuestions();
            renderFooter();
        }

        window.onload = function() {
            initializeQuestions();
            renderApp();
            startTimer();
        };

        // Expose to window
        window.handleRespostaFechada = handleRespostaFechada;
        window.handleRespostaAberta = handleRespostaAberta;
        window.handleVerificar = handleVerificar;
        window.handleLiberarGabaritosAbertas = handleLiberarGabaritosAbertas;
    </script>
</body>
</html>
